<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-v1.7 docs-doc-page docs-doc-id-installation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Installation | OpenKruise</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openkruise.io/docs/v1.7/installation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.7"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.7"><meta data-rh="true" name="docsearch:version" content="v1.7"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.7"><meta data-rh="true" property="og:title" content="Installation | OpenKruise"><meta data-rh="true" name="description" content="Versioning and Compatibility"><meta data-rh="true" property="og:description" content="Versioning and Compatibility"><link data-rh="true" rel="icon" href="/img/openkruise.ico"><link data-rh="true" rel="canonical" href="https://openkruise.io/docs/v1.7/installation"><link data-rh="true" rel="alternate" href="https://openkruise.io/docs/v1.7/installation" hreflang="en"><link data-rh="true" rel="alternate" href="https://openkruise.io/zh/docs/v1.7/installation" hreflang="zh"><link data-rh="true" rel="alternate" href="https://openkruise.io/docs/v1.7/installation" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKASWWQYOP-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenKruise RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenKruise Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="OpenKruise" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.a97b459d.css">
<script src="/assets/js/runtime~main.1a882505.js" defer="defer"></script>
<script src="/assets/js/main.c27404b3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/openkruise.ico"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">‚≠êÔ∏è If you like OpenKruise, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openkruise/kruise">GitHub</a>! ‚≠êÔ∏è</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openkruise.ico" alt="OpenKruise" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/openkruise.ico" alt="OpenKruise" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenKruise</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Kruise</a><a class="navbar__item navbar__link" href="/rollouts/introduction">Rollouts</a><a class="navbar__item navbar__link" href="/kruisegame/introduction">Kruise-Game</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/adopters">Adopters</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/v1.7/installation">v1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/installation">v1.9 üöß</a></li><li><a class="dropdown__link" href="/docs/installation">v1.8</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v1.7/installation">v1.7</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/v1.7/installation" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/v1.7/installation" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/v1.7">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.7">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v1.7/installation">Installation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/v1.7/core-concepts/architecture">Core Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.7/core-concepts/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v1.7/core-concepts/inplace-update">InPlace Update</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v1.7/user-manuals/cloneset">User Manuals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v1.7/best-practices/hpa-configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v1.7/developer-manuals/go-client">Developer Manuals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v1.7/operator-manuals/availability">Operator Manuals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/v1.7/cli-tool/kubectl-plugin">Reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/v1.7/faq">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->OpenKruise<!-- --> <b>v1.7</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/installation">latest version</a></b> (<!-- -->v1.8<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Installation</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.7</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Installation</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="versioning-and-compatibility">Versioning and Compatibility<a href="#versioning-and-compatibility" class="hash-link" aria-label="Direct link to Versioning and Compatibility" title="Direct link to Versioning and Compatibility">‚Äã</a></h2>
<table><thead><tr><th>Kruise Version</th><th>1.18</th><th>1.20</th><th>1.22</th><th>1.24</th><th>1.26</th><th>1.28</th><th>1.30</th><th>1.32</th></tr></thead><tbody><tr><td>1.4.x</td><td>+</td><td>+</td><td>‚úì</td><td>-</td><td>?</td><td>?</td><td>?</td><td>?</td></tr><tr><td>1.5.x</td><td>+</td><td>+</td><td>+</td><td>‚úì</td><td>-</td><td>?</td><td>?</td><td>?</td></tr><tr><td>1.6.x</td><td>+</td><td>+</td><td>+</td><td>+</td><td>‚úì</td><td>?</td><td>?</td><td>?</td></tr><tr><td>1.7.x</td><td>+</td><td>+</td><td>+</td><td>+</td><td>+</td><td>‚úì</td><td>?</td><td>?</td></tr></tbody></table>
<p>Key:</p>
<ul>
<li>‚úì: Exactly the same API objects/fields in both Kruise and the Kubernetes version.</li>
<li>+: Kruise has api objects/fields that may not be present in the Kubernetes cluster, but everything they have in common will work.</li>
<li>-: The Kubernetes cluster has features the Kruise can&#x27;t use (additional API objects and fields, etc).</li>
<li>?: It is not tested against the Kubernetes cluster.</li>
</ul>
<p>Here is some important notes about the compatibility between Kruise and Kubernetes:</p>
<ul>
<li>
<p>Since v1.0.0 (alpha/beta), OpenKruise requires <strong>Kubernetes version &gt;= 1.16</strong>.</p>
</li>
<li>
<p>Since v1.5.0(alpha/beta), OpenKruise no longer supports dockershim. If you still use Docker Engine to run containers in Kubernetes,
you can <a href="https://kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim/migrate-dockershim-dockerd/" target="_blank" rel="noopener noreferrer">Migrate Docker Engine nodes from dockershim to cri-dockerd.</a></p>
</li>
<li>
<p>Since v1.6.0 (alpha/beta), OpenKruise requires <strong>Kubernetes version &gt;= 1.18</strong>. However it&#x27;s still possible to use OpenKruise with Kubernetes versions 1.16 and 1.17 as long as KruiseDaemon is not enabled(install/upgrade kruise charts with featureGates=&quot;KruiseDaemon=false&quot;)</p>
</li>
<li>
<p>Since v1.6.0 (alpha/beta), KruiseDaemon will <strong>no longer support v1alpha2 CRI runtimes</strong>. However, it is still possible to use OpenKruise on Kubernetes clusters with nodes that only support v1alpha2 CRI, as long as KruiseDaemon is not enabled (install/upgrade Kruise charts with featureGates=&quot;KruiseDaemon=false&quot;).</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-with-helm">Install with helm<a href="#install-with-helm" class="hash-link" aria-label="Direct link to Install with helm" title="Direct link to Install with helm">‚Äã</a></h2>
<p>Kruise can be simply installed by helm v3.5+, which is a simple command-line tool and you can get it from <a href="https://github.com/helm/helm/releases" target="_blank" rel="noopener noreferrer">here</a>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add openkruise charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> openkruise https://openkruise.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kruise openkruise/kruise </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.7</span><span class="token plain">.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Note:</strong> <a href="https://github.com/openkruise/kruise/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">Changelog</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-with-helm">Upgrade with helm<a href="#upgrade-with-helm" class="hash-link" aria-label="Direct link to Upgrade with helm" title="Direct link to Upgrade with helm">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add openkruise charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> openkruise https://openkruise.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Upgrade to the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm upgrade kruise openkruise/kruise </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.7</span><span class="token plain">.1 </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">--force</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that:</p>
<ol>
<li>Before upgrade, you <strong>must</strong> firstly read the <a href="https://github.com/openkruise/kruise/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">Change Log</a>
to make sure that you have understand the breaking changes in the new version.</li>
<li>If you want to drop the chart parameters you configured for the old release or set some new parameters,
it is recommended to add <code>--reset-values</code> flag in <code>helm upgrade</code> command.
Otherwise you should use <code>--reuse-values</code> flag to reuse the last release&#x27;s values.</li>
<li>If you are <strong>upgrading Kruise from 0.x to 1.x</strong>, you must add <code>--force</code> for upgrade command. Otherwise it is an optional flag.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-download-charts-manually">Optional: download charts manually<a href="#optional-download-charts-manually" class="hash-link" aria-label="Direct link to Optional: download charts manually" title="Direct link to Optional: download charts manually">‚Äã</a></h2>
<p>If you have problem with connecting to <code>https://openkruise.github.io/charts/</code> in production, you might need to download the chart from <a href="https://github.com/openkruise/charts/releases" target="_blank" rel="noopener noreferrer">here</a> manually and install or upgrade with it.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm install/upgrade kruise /</span><span class="token environment constant" style="color:#36acaa">PATH</span><span class="token plain">/TO/CHART</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="options">Options<a href="#options" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options">‚Äã</a></h2>
<p>Note that installing this chart directly means it will use the default template values for Kruise.</p>
<p>You may have to set your specific configurations if it is deployed into a production cluster, or you want to configure feature-gates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-chart-parameters">Optional: chart parameters<a href="#optional-chart-parameters" class="hash-link" aria-label="Direct link to Optional: chart parameters" title="Direct link to Optional: chart parameters">‚Äã</a></h3>
<p>The following table lists the configurable parameters of the chart and their default values.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup-parameters">setup parameters<a href="#setup-parameters" class="hash-link" aria-label="Direct link to setup parameters" title="Direct link to setup parameters">‚Äã</a></h4>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>featureGates</code></td><td>Feature gates for Kruise, empty string means all enabled</td><td><code>&quot;&quot;</code></td></tr><tr><td><code>installation.namespace</code></td><td>Namespace for kruise installation</td><td><code>kruise-system</code></td></tr><tr><td><code>installation.createNamespace</code></td><td>Whether to create the installation.namespace</td><td><code>true</code></td></tr><tr><td><code>installation.roleListGroups</code></td><td>ApiGroups which kruise is permit to list, default set to be all</td><td><code>*</code></td></tr><tr><td><code>crds.managed</code></td><td>Kruise will not install CRDs with chart if this is false</td><td><code>true</code></td></tr><tr><td><code>imagePullSecrets</code></td><td>The list of image pull secrets for kruise image</td><td><code>[]</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="manager-parameters">manager parameters<a href="#manager-parameters" class="hash-link" aria-label="Direct link to manager parameters" title="Direct link to manager parameters">‚Äã</a></h4>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>manager.log.level</code></td><td>Log level that kruise-manager printed</td><td><code>4</code></td></tr><tr><td><code>manager.replicas</code></td><td>Replicas of kruise-controller-manager deployment</td><td><code>2</code></td></tr><tr><td><code>manager.image.repository</code></td><td>Repository for kruise-manager image</td><td><code>openkruise/kruise-manager</code></td></tr><tr><td><code>manager.image.tag</code></td><td>Tag for kruise-manager image</td><td><code>v1.7.2</code></td></tr><tr><td><code>manager.resources.limits.cpu</code></td><td>CPU resource limit of kruise-manager container</td><td><code>200m</code></td></tr><tr><td><code>manager.resources.limits.memory</code></td><td>Memory resource limit of kruise-manager container</td><td><code>512Mi</code></td></tr><tr><td><code>manager.resources.requests.cpu</code></td><td>CPU resource request of kruise-manager container</td><td><code>100m</code></td></tr><tr><td><code>manager.resources.requests.memory</code></td><td>Memory resource request of kruise-manager container</td><td><code>256Mi</code></td></tr><tr><td><code>manager.metrics.port</code></td><td>Port of metrics served</td><td><code>8080</code></td></tr><tr><td><code>manager.webhook.port</code></td><td>Port of webhook served</td><td><code>9443</code></td></tr><tr><td><code>manager.pprofAddr</code></td><td>Address of pprof served</td><td><code>localhost:8090</code></td></tr><tr><td><code>manager.nodeAffinity</code></td><td>Node affinity policy for kruise-manager pod</td><td><code>{}</code></td></tr><tr><td><code>manager.nodeSelector</code></td><td>Node labels for kruise-manager pod</td><td><code>{}</code></td></tr><tr><td><code>manager.tolerations</code></td><td>Tolerations for kruise-manager pod</td><td><code>[]</code></td></tr><tr><td><code>manager.resyncPeriod</code></td><td>Resync period of informer kruise-manager, defaults no resync</td><td><code>0</code></td></tr><tr><td><code>manager.hostNetwork</code></td><td>Whether kruise-manager pod should run with hostnetwork</td><td><code>false</code></td></tr><tr><td><code>manager.loggingFormat</code></td><td>Logging format, valid formats includes <code> </code>(plain text), <code>json</code></td><td><code> </code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="daemon-parameters">daemon parameters<a href="#daemon-parameters" class="hash-link" aria-label="Direct link to daemon parameters" title="Direct link to daemon parameters">‚Äã</a></h4>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>daemon.extraEnvs</code></td><td>Extra environment variables that will be pass onto pods</td><td><code>[]</code></td></tr><tr><td><code>daemon.log.level</code></td><td>Log level that kruise-daemon printed</td><td><code>4</code></td></tr><tr><td><code>daemon.port</code></td><td>Port of metrics and healthz that kruise-daemon served</td><td><code>10221</code></td></tr><tr><td><code>daemon.pprofAddr</code></td><td>Address of pprof served</td><td><code>localhost:10222</code></td></tr><tr><td><code>daemon.resources.limits.cpu</code></td><td>CPU resource limit of kruise-daemon container</td><td><code>50m</code></td></tr><tr><td><code>daemon.resources.limits.memory</code></td><td>Memory resource limit of kruise-daemon container</td><td><code>128Mi</code></td></tr><tr><td><code>daemon.resources.requests.cpu</code></td><td>CPU resource request of kruise-daemon container</td><td><code>0</code></td></tr><tr><td><code>daemon.resources.requests.memory</code></td><td>Memory resource request of kruise-daemon container</td><td><code>0</code></td></tr><tr><td><code>daemon.affinity</code></td><td>Affinity policy for kruise-daemon pod</td><td><code>{}</code></td></tr><tr><td><code>daemon.socketLocation</code></td><td>Location of the container manager control socket</td><td><code>/var/run</code></td></tr><tr><td><code>daemon.socketFile</code></td><td>Specify the socket file name in <code>socketLocation</code> (if you are not using containerd/docker/pouch/cri-o)</td><td><code> </code></td></tr><tr><td><code>daemon.credentialProvider.enable</code></td><td>Whether to enable credential provider for image pull job</td><td><code>false</code></td></tr><tr><td><code>daemon.credentialProvider.hostPath</code></td><td>node dir of the credential provider plugin, kruise-daemon will mount the dir as a hostpath volume</td><td><code>credential-provider-plugin</code></td></tr><tr><td><code>daemon.credentialProvider.configmap</code></td><td>configmap name of the credential provider in kruise-system ns</td><td><code>credential-provider-config</code></td></tr><tr><td><code>daemon.credentialProvider.awsCredentialsDir</code></td><td>aws credentials dir if using AWS, for example: <code>/root/.aws</code></td><td><code> </code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-parameters">other parameters<a href="#other-parameters" class="hash-link" aria-label="Direct link to other parameters" title="Direct link to other parameters">‚Äã</a></h4>
<table><thead><tr><th>Parameter</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>enableKubeCacheMutationDetector</code></td><td>Whether to enable KUBE_CACHE_MUTATION_DETECTOR</td><td><code>false</code></td></tr><tr><td><code>webhookConfiguration.timeoutSeconds</code></td><td>The timeoutSeconds for all webhook configuration</td><td><code>30</code></td></tr><tr><td><code>serviceAccount.annotations</code></td><td>Annotations to patch for serviceAccounts</td><td><code>{}</code></td></tr><tr><td><code>externalCerts.annotations</code></td><td>Annotations to patch for webhook configuration and crd when featuregate <code>EnableExternalCerts</code> is enabled. For example, <code>cert-manager.io/inject-ca-from: kruise-system/kruise-webhook-certs</code>.</td><td><code>{}</code></td></tr></tbody></table>
<p>Specify each parameter using the <code>--set key=value[,key=value]</code> argument to <code>helm install</code> or <code>helm upgrade</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-feature-gate">Optional: feature-gate<a href="#optional-feature-gate" class="hash-link" aria-label="Direct link to Optional: feature-gate" title="Direct link to Optional: feature-gate">‚Äã</a></h3>
<p>Feature-gate controls some influential features in Kruise:</p>
<table><thead><tr><th>Name</th><th>Description</th><th>Default</th><th>Effect (if closed)</th></tr></thead><tbody><tr><td><code>PodWebhook</code></td><td>Whether to open a webhook for Pod <strong>create</strong></td><td><code>true</code></td><td>SidecarSet/KruisePodReadinessGate disabled</td></tr><tr><td><code>KruiseDaemon</code></td><td>Whether to deploy <code>kruise-daemon</code> DaemonSet</td><td><code>true</code></td><td>ImagePulling/ContainerRecreateRequest disabled</td></tr><tr><td><code>DaemonWatchingPod</code></td><td>Should each <code>kruise-daemon</code> watch pods on the same node</td><td><code>true</code></td><td>For in-place update with same imageID or env from labels/annotations</td></tr><tr><td><code>CloneSetShortHash</code></td><td>Enables CloneSet controller only set revision hash name to pod label</td><td><code>false</code></td><td>CloneSet name can not be longer than 54 characters</td></tr><tr><td><code>KruisePodReadinessGate</code></td><td>Enables Kruise webhook to inject &#x27;KruisePodReady&#x27; readiness-gate to all Pods during creation</td><td><code>false</code></td><td>The readiness-gate will only be injected to Pods created by Kruise workloads</td></tr><tr><td><code>PreDownloadImageForInPlaceUpdate</code></td><td>Enables CloneSet controller to create ImagePullJobs to pre-download images for in-place update</td><td><code>false</code></td><td>No image pre-download for in-place update</td></tr><tr><td><code>CloneSetPartitionRollback</code></td><td>Enables CloneSet controller to rollback Pods to currentRevision when number of updateRevision pods is bigger than (replicas - partition)</td><td><code>false</code></td><td>CloneSet will only update Pods to updateRevision</td></tr><tr><td><code>ResourcesDeletionProtection</code></td><td>Enables protection for resources deletion</td><td><code>true</code></td><td>No protection for resources deletion</td></tr><tr><td><code>TemplateNoDefaults</code></td><td>Whether to disable defaults injection for pod/pvc template in workloads</td><td><code>false</code></td><td>Should not close this feature if it has open</td></tr><tr><td><code>PodUnavailableBudgetDeleteGate</code></td><td>Enables PodUnavailableBudget for pod deletion, eviction</td><td><code>true</code></td><td>No protection for pod deletion, eviction</td></tr><tr><td><code>PodUnavailableBudgetUpdateGate</code></td><td>Enables PodUnavailableBudget for pod.Spec update</td><td><code>false</code></td><td>No protection for in-place update</td></tr><tr><td><code>WorkloadSpread</code></td><td>Enables WorkloadSpread to manage multi-domain and elastic deploy</td><td><code>true</code></td><td>WorkloadSpread disabled</td></tr><tr><td><code>InPlaceUpdateEnvFromMetadata</code></td><td>Enables Kruise to in-place update a container in Pod when its env from labels/annotations changed and pod is in-place updating</td><td><code>true</code></td><td>Only container image can be in-place update</td></tr><tr><td><code>StatefulSetAutoDeletePVC</code></td><td>Enables policies controlling deletion of PVCs created by a StatefulSet</td><td><code>true</code></td><td>No deletion of PVCs by StatefulSet</td></tr><tr><td><code>PreDownloadImageForDaemonSetUpdate</code></td><td>Enables DaemonSet controller to create ImagePullJobs to pre-download images for in-place update</td><td><code>false</code></td><td>No image pre-download for in-place update</td></tr><tr><td><code>PodProbeMarkerGate</code></td><td>Whether to turn on PodProbeMarker ability</td><td><code>true</code></td><td>PodProbeMarker disabled</td></tr><tr><td><code>SidecarSetPatchPodMetadataDefaultsAllowed</code></td><td>Allow SidecarSet patch any annotations to Pod Object</td><td><code>false</code></td><td>Annotations are not allowed to patch randomly and need to be configured via SidecarSet_PatchPodMetadata_WhiteList</td></tr><tr><td><code>SidecarTerminator</code></td><td>SidecarTerminator enables SidecarTerminator to stop sidecar containers when all main containers exited</td><td><code>false</code></td><td>SidecarTerminator disabled</td></tr><tr><td><code>CloneSetEventHandlerOptimization</code></td><td>CloneSetEventHandlerOptimization enable optimization for cloneset-controller to reduce the queuing frequency cased by pod update</td><td><code>false</code></td><td>optimization for cloneset-controller to reduce the queuing frequency cased by pod update disabled</td></tr><tr><td><code>ImagePullJobGate</code></td><td>Enables ImagePullJob to pre-download images</td><td><code>false</code></td><td>ImagePullJob disabled</td></tr><tr><td><code>ResourceDistributionGate</code></td><td>Enables ResourceDistribution to distribute configmaps or secret resources</td><td><code>false</code></td><td>ResourceDistribution disabled</td></tr><tr><td><code>DeletionProtectionForCRDCascadingGate</code></td><td>Enables DeletionProtection for crd cascading deletion</td><td><code>false</code></td><td>DeletionProtection for crd cascading deletion disabled</td></tr></tbody></table>
<p>If you want to configure the feature-gate, just set the parameter when install or upgrade. Such as:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kruise https://</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">featureGates</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ResourcesDeletionProtection=true\,PreDownloadImageForInPlaceUpdate=true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to enable all feature-gates, set the parameter as <code>featureGates=AllAlpha=true</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-the-local-image-for-china">Optional: the local image for China<a href="#optional-the-local-image-for-china" class="hash-link" aria-label="Direct link to Optional: the local image for China" title="Direct link to Optional: the local image for China">‚Äã</a></h3>
<p>If you are in China and have problem to pull image from official DockerHub, you can use the registry hosted on Alibaba Cloud:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kruise https://</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain">  </span><span class="token assign-left variable" style="color:#36acaa">manager.image.repository</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">openkruise-registry.cn-shanghai.cr.aliyuncs.com/openkruise/kruise-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation-parameters-for-k3s">Installation parameters for K3s<a href="#installation-parameters-for-k3s" class="hash-link" aria-label="Direct link to Installation parameters for K3s" title="Direct link to Installation parameters for K3s">‚Äã</a></h3>
<p>Usually K3s has the different runtime path from the default <code>/var/run</code>. So you have to set <code>daemon.socketLocation</code> to the real runtime socket path on your K3s node (e.g. <code>/run/k3s</code> or <code>/var/run/k3s/</code>).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation-parameters-for-aws-eks">Installation parameters for AWS EKS<a href="#installation-parameters-for-aws-eks" class="hash-link" aria-label="Direct link to Installation parameters for AWS EKS" title="Direct link to Installation parameters for AWS EKS">‚Äã</a></h3>
<p>When using a custom CNI (such as Weave or Calico) on EKS, the webhook cannot be reached by default. This happens because the control plane cannot be configured to run on a custom CNI on EKS, so the CNIs differ between control plane and worker nodes.</p>
<p>To address this, the webhook can be run in the host network so it can be reached, by setting <code>--set manager.hostNetwork=true</code> when use helm install or upgrade.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-webhook-ca-injection-using-external-certification-management-tool">Support webhook CA injection using external certification management tool<a href="#support-webhook-ca-injection-using-external-certification-management-tool" class="hash-link" aria-label="Direct link to Support webhook CA injection using external certification management tool" title="Direct link to Support webhook CA injection using external certification management tool">‚Äã</a></h3>
<p><strong>FEATURE STATE:</strong> Kruise v1.7.0</p>
<p>Kruise needs certificates to enable mutating, validating and conversion webhooks. By default, kruise will generate self-signed certificates for webhook server.
If you want to use external certification management tool, e.g. cert-manager, you can follow these steps when install or upgrade:</p>
<ol>
<li>Install external certification management tool, e.g. <a href="https://cert-manager.io/docs/installation/helm/" target="_blank" rel="noopener noreferrer">cert-manager</a>.</li>
<li>Create issuer and certificate resources if you have not done this before.</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cert</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Certificate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kruise</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">webhook</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># consistent with installation.namespace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kruise</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># where to store the certificates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># cert-manager would generate a secret kruise-system/kruise-webhook-certs with the certificates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># DO NOT CHANGE THE SECRET NAME SINCE KRUISE READ CERTS FROM THIS SECRET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kruise</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">webhook</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dnsNames</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> kruise</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">webhook</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service.kruise</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system.svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">issuerRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> selfsigned</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kruise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Issuer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cert</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Issuer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> selfsigned</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kruise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kruise</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selfSigned</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>During installation and upgrade, enable external certs support by setting featureGates=EnableExternalCerts=true and specify extra annotations that should be added to webhookconfiguration and CRD.</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm install kruise https://... --set featureGates=&quot;EnableExternalCerts=true&quot; --set-json externalCerts.annotations=&#x27;{&quot;cert-manager.io/inject-ca-from&quot;:&quot;kruise-system/kruise-webhook-certs&quot;}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Visit <a href="https://cert-manager.io/docs/concepts/ca-injector/" target="_blank" rel="noopener noreferrer">CA Injector - cert manager</a> for more details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="structured-logs">Structured Logs<a href="#structured-logs" class="hash-link" aria-label="Direct link to Structured Logs" title="Direct link to Structured Logs">‚Äã</a></h3>
<p><strong>FEATURE STATE:</strong> Kruise v1.7.0</p>
<p>Logs are an essential aspect of observability and a critical tool for debugging. But OpenKruise logs have traditionally been unstructured strings, making any automated parsing difficult and any downstream processing, analysis, or querying challenging to do reliably.</p>
<p>From OpenKruise 1.7, we are adding support for structured logs, which natively support (key, value) pairs and object references.
And logs can also be outputted in JSON format using <code>helm install ... --set manager.loggingFormat=json</code>.</p>
<p>For example, this invocation of InfoS:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">klog.V(3).InfoS(&quot;SidecarSet updated status success&quot;, &quot;sidecarSet&quot;, klog.KObj(sidecarSet), &quot;matchedPods&quot;, status.MatchedPods,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;updatedPods&quot;, status.UpdatedPods, &quot;readyPods&quot;, status.ReadyPods, &quot;updateReadyPods&quot;, status.UpdatedReadyPods)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>will result in this log:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">I0821 14:22:35.587919       1 sidecarset_processor.go:280] &quot;SidecarSet updated status success&quot; sidecarSet=&quot;test-sidecarset&quot; matchedPods=1 updatedPods=1 readyPods=1 updateReadyPods=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, if <code>helm install ... --set manager.loggingFormat=json</code>, it will result in this output:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;ts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1724239224606.642</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;caller&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sidecarset/sidecarset_processor.go:280&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;msg&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SidecarSet updated status success&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;v&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sidecarSet&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;test-sidecarset&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;matchedPods&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;updatedPods&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;readyPods&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;updateReadyPods&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uninstall">Uninstall<a href="#uninstall" class="hash-link" aria-label="Direct link to Uninstall" title="Direct link to Uninstall">‚Äã</a></h2>
<p>Note that this will lead to all resources created by Kruise, including webhook configurations, services, namespace, CRDs, CR instances and Pods managed by Kruise controller, to be deleted!</p>
<p>Please do this ONLY when you fully understand the consequence.</p>
<p>To uninstall kruise if it is installed with helm charts:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ helm uninstall kruise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">release </span><span class="token string" style="color:#e3116c">&quot;kruise&quot;</span><span class="token plain"> uninstalled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kruise-state-metrics">Kruise State Metrics<a href="#kruise-state-metrics" class="hash-link" aria-label="Direct link to Kruise State Metrics" title="Direct link to Kruise State Metrics">‚Äã</a></h2>
<p><a href="https://github.com/openkruise/kruise-state-metrics" target="_blank" rel="noopener noreferrer">kruise-state-metrics</a> is a simple service that listens to the Kubernetes API server and generates metrics about the state of the objects.
It is not focused on the health of the individual OpenKruise components, but rather on the health of the various objects inside, such as clonesets, advanced statefulsets and sidecarsets.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Firstly add openkruise charts repository if you haven&#x27;t do this.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> openkruise https://openkruise.github.io/charts/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># [Optional]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm repo update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Install the latest version.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> kruise openkruise/kruise-state-metrics </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openkruise/openkruise.io/edit/master/docs/installation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-23T01:13:54.000Z" itemprop="dateModified">Jul 23, 2025</time></b> by <b>Gautam Manchandani</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v1.7"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/v1.7/core-concepts/architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#versioning-and-compatibility" class="table-of-contents__link toc-highlight">Versioning and Compatibility</a></li><li><a href="#install-with-helm" class="table-of-contents__link toc-highlight">Install with helm</a></li><li><a href="#upgrade-with-helm" class="table-of-contents__link toc-highlight">Upgrade with helm</a></li><li><a href="#optional-download-charts-manually" class="table-of-contents__link toc-highlight">Optional: download charts manually</a></li><li><a href="#options" class="table-of-contents__link toc-highlight">Options</a><ul><li><a href="#optional-chart-parameters" class="table-of-contents__link toc-highlight">Optional: chart parameters</a></li><li><a href="#optional-feature-gate" class="table-of-contents__link toc-highlight">Optional: feature-gate</a></li><li><a href="#optional-the-local-image-for-china" class="table-of-contents__link toc-highlight">Optional: the local image for China</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a><ul><li><a href="#installation-parameters-for-k3s" class="table-of-contents__link toc-highlight">Installation parameters for K3s</a></li><li><a href="#installation-parameters-for-aws-eks" class="table-of-contents__link toc-highlight">Installation parameters for AWS EKS</a></li><li><a href="#support-webhook-ca-injection-using-external-certification-management-tool" class="table-of-contents__link toc-highlight">Support webhook CA injection using external certification management tool</a></li><li><a href="#structured-logs" class="table-of-contents__link toc-highlight">Structured Logs</a></li></ul></li><li><a href="#uninstall" class="table-of-contents__link toc-highlight">Uninstall</a></li><li><a href="#kruise-state-metrics" class="table-of-contents__link toc-highlight">Kruise State Metrics</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kubernetes.slack.com/channels/openkruise" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes Slack ( #openkruise channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v1.7/">DingTalk (GroupID: 23330762 )</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v1.7/">WeChat (User: openkruise )</a></li><li class="footer__item"><a href="https://shimo.im/docs/gXqmeQOYBehZ4vqo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/openkruise/community/blob/master/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Membership<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>¬© 2025 The OpenKruise Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
</body>
</html>