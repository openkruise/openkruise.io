<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-best-practices/resource-policy-sidecarset" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Dynamic Resource Injection with SidecarSet | OpenKruise</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openkruise.io/docs/next/best-practices/resource-policy-sidecarset"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dynamic Resource Injection with SidecarSet | OpenKruise"><meta data-rh="true" name="description" content="SidecarSet is widely used for various proxy services. In certain scenarios, you may want the sidecar container&#x27;s resources to dynamically adjust based on the resources of the target Pod."><meta data-rh="true" property="og:description" content="SidecarSet is widely used for various proxy services. In certain scenarios, you may want the sidecar container&#x27;s resources to dynamically adjust based on the resources of the target Pod."><link data-rh="true" rel="icon" href="/img/openkruise.ico"><link data-rh="true" rel="canonical" href="https://openkruise.io/docs/next/best-practices/resource-policy-sidecarset"><link data-rh="true" rel="alternate" href="https://openkruise.io/docs/next/best-practices/resource-policy-sidecarset" hreflang="en"><link data-rh="true" rel="alternate" href="https://openkruise.io/zh/docs/next/best-practices/resource-policy-sidecarset" hreflang="zh"><link data-rh="true" rel="alternate" href="https://openkruise.io/docs/next/best-practices/resource-policy-sidecarset" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKASWWQYOP-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Dynamic Resource Injection with SidecarSet","item":"https://openkruise.io/docs/next/best-practices/resource-policy-sidecarset"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenKruise RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenKruise Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="OpenKruise" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.7a881dd0.css">
<script src="/assets/js/runtime~main.3d06ed7a.js" defer="defer"></script>
<script src="/assets/js/main.d68de8cc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/openkruise.ico"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">‚≠êÔ∏è If you like OpenKruise, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openkruise/kruise">GitHub</a>! ‚≠êÔ∏è</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openkruise.ico" alt="OpenKruise" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/openkruise.ico" alt="OpenKruise" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenKruise</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Kruise</a><a class="navbar__item navbar__link" href="/rollouts/introduction">Rollouts</a><a class="navbar__item navbar__link" href="/kruisegame/introduction">Kruise-Game</a><a class="navbar__item navbar__link" href="/kruiseagents/introduction">Kruise-Agents</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/adopters">Adopters</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/best-practices/resource-policy-sidecarset">v1.10 üöß</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/best-practices/resource-policy-sidecarset">v1.10 üöß</a></li><li><a class="dropdown__link" href="/docs/best-practices/resource-policy-sidecarset">v1.9</a></li><li><a class="dropdown__link" href="/docs/v1.8">v1.8</a></li><li><a class="dropdown__link" href="/docs/v1.7">v1.7</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/next/best-practices/resource-policy-sidecarset" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/docs/next/best-practices/resource-policy-sidecarset" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/next"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/installation"><span title="Installation" class="linkLabel_WmDU">Installation</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/next/core-concepts/architecture"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/core-concepts/architecture"><span title="Architecture" class="linkLabel_WmDU">Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/core-concepts/inplace-update"><span title="InPlace Update" class="linkLabel_WmDU">InPlace Update</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/user-manuals/cloneset"><span title="User Manuals" class="categoryLinkLabel_W154">User Manuals</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/next/best-practices/hpa-configuration"><span title="Best Practices" class="categoryLinkLabel_W154">Best Practices</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/hpa-configuration"><span title="HPA configuration" class="linkLabel_WmDU">HPA configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/ci-pipeline-image-predownload"><span title="Cloud-Native Devops Best Practices(1) - Continuous Integration (CI) + OpenKruise Image Pre-download" class="linkLabel_WmDU">Cloud-Native Devops Best Practices(1) - Continuous Integration (CI) + OpenKruise Image Pre-download</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/gitops-with-kruise"><span title="Cloud-Native Devops Best Practices(2) - GitOps + OpenKruise CloneSet" class="linkLabel_WmDU">Cloud-Native Devops Best Practices(2) - GitOps + OpenKruise CloneSet</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/log-container-sidecarset"><span title="Best Practice for Managing Log Collection Sidecar Containers" class="linkLabel_WmDU">Best Practice for Managing Log Collection Sidecar Containers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/cloneset-lifecycle"><span title="CloneSet lifecycle -- Insert Customized Logic Into Pod Lifecycle" class="linkLabel_WmDU">CloneSet lifecycle -- Insert Customized Logic Into Pod Lifecycle</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/elastic-deployment"><span title="Extreme Elastic Schedule Solution Based on HPA and WorkloadSpread" class="linkLabel_WmDU">Extreme Elastic Schedule Solution Based on HPA and WorkloadSpread</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/best-practices/acronjob+broadcastjob"><span title="BroadcastJob + Advanced CronJob Help You Maintain Kubernetes Nodes" class="linkLabel_WmDU">BroadcastJob + Advanced CronJob Help You Maintain Kubernetes Nodes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/best-practices/resource-policy-sidecarset"><span title="Dynamic Resource Injection with SidecarSet" class="linkLabel_WmDU">Dynamic Resource Injection with SidecarSet</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/developer-manuals/go-client"><span title="Developer Manuals" class="categoryLinkLabel_W154">Developer Manuals</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/operator-manuals/availability"><span title="Operator Manuals" class="categoryLinkLabel_W154">Operator Manuals</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/next/cli-tool/kubectl-plugin"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->OpenKruise<!-- --> <b>v1.10 üöß</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/best-practices/resource-policy-sidecarset">latest version</a></b> (<!-- -->v1.9<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Best Practices</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Dynamic Resource Injection with SidecarSet</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.10 üöß</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dynamic Resource Injection with SidecarSet</h1></header><p>SidecarSet is widely used for various proxy services. In certain scenarios, you may want the sidecar container&#x27;s resources to dynamically adjust based on the resources of the target Pod.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example" translate="no">‚Äã</a></h3>
<p>You can control the resource calculation strategy for Kruise sidecar containers by configuring <code>spec.containers[i].resourcesPolicy</code> and <code>spec.initContainers[i].resourcesPolicy</code> in the SidecarSet object.</p>
<p>Let&#x27;s say we want the sidecar container&#x27;s CPU resources to follow a piecewise linear function defined by the points <code>[[0,0.5], [1,0.5], [2,1], [3,2], [4,3], [5,3]]</code>, where the x-coordinate represents the sum of CPU limits from other containers in the target Pod, and the y-coordinate represents the sidecar container&#x27;s CPU limit. To help you quickly generate the expression, we provide a set of calculator tools:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Clone the Kruise Git repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/openkruise/kruise.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Navigate to the Kruise directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> kruise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Generate the expression - this command will return: min(max(max(max(0.5,0.5*cpu),cpu-1.0),cpu-1.0),3.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 hack/calculator-helper/generator/generate_expression.py </span><span class="token string" style="color:#e3116c">&quot;[[0,0.5], [1,0.5], [2,1], [3,2], [4,3], [5,3]]&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"> cpu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To verify the expression is correct, you can use the validator tool to generate a visual plot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The validator uses the same calculator implementation as ResourcePolicy, ensuring consistent results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## Build the validator tool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> hack/calculator-helper/validator </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> go build </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> validator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">## Validate the expression and generate the plot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./validator </span><span class="token parameter variable" style="color:#36acaa">-expr</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;min(max(max(max(0.5,0.5*cpu),cpu-1.0),cpu-1.0),3.0)&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-var</span><span class="token plain"> cpu </span><span class="token parameter variable" style="color:#36acaa">-min</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-max</span><span class="token plain"> 10500m </span><span class="token parameter variable" style="color:#36acaa">-output</span><span class="token plain"> plot.png</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="sidecarset-resource-policy-plot" src="data:image/png;base64,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" width="800" height="600" class="img_ev3q"></p>
<p>Once you&#x27;ve verified the expression is correct, you can apply it to your SidecarSet:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SidecarSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sidecar1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resourcesPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetContainersMode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sum </span><span class="token comment" style="color:#999988;font-style:italic"># Calculate sidecar resources based on the sum of all target container limits</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetContainersNameRegex</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ^.</span><span class="token important">*$</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Match all containers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">resourcesExpr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> min(max(max(max(0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">0.5</span><span class="token important">*cpu)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">cpu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1.0)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">cpu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1.0)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">3.0) </span><span class="token comment" style="color:#999988;font-style:italic"># The &#x27;cpu&#x27; variable represents the sum of target container CPU limits, calculated according to targetContainersMode and targetContainersNameRegex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 200Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">cpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100Mi</span><br></span></code></pre></div></div>
<p><strong>Important Notes</strong>:</p>
<ul>
<li class="">Supported expression operators:<!-- -->
<ul>
<li class="">Basic arithmetic: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code></li>
<li class="">Parentheses: <code>(</code> and <code>)</code></li>
<li class="">Functions: <code>max()</code>, <code>min()</code></li>
<li class="">Percentages: e.g., <code>50%</code> (equals 0.5)</li>
<li class="">Kubernetes resources: e.g., <code>40m</code> (40 millicores), <code>100Mi</code> (100 mebibytes)</li>
</ul>
</li>
<li class="">Supported expression value types:<!-- -->
<ul>
<li class="">Integers: e.g., <code>42</code></li>
<li class="">Floating-point numbers: e.g., <code>3.14</code></li>
<li class="">Percentages: e.g., <code>50%</code> (automatically converted to 0.5)</li>
<li class="">Kubernetes resources: e.g., <code>200m</code>, <code>512Mi</code>, <code>1Gi</code></li>
</ul>
</li>
<li class="">If both <code>resourcesPolicy</code> and <code>resources</code> are configured, the Kruise validating webhook will reject the Pod creation request.</li>
<li class=""><code>targetContainersNameRegex</code> is a regular expression pattern for matching target container names. If no container names match this regex, the validating webhook will reject the Pod creation request. Target containers include native sidecar containers and regular containers, but exclude Kruise sidecar containers.</li>
<li class=""><code>resourcesPolicy</code> can be applied to both native sidecar containers (<code>sidecarset.spec.initContainers.resourcesPolicy</code>) and regular containers (<code>sidecarset.spec.containers.resourcesPolicy</code>).</li>
<li class="">Injection only happened when pod creating, and will not be updated when pod running.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/openkruise/openkruise.io/edit/master/docs/best-practices/resource-policy-sidecarset.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-28T07:50:09.000Z" itemprop="dateModified">Feb 28, 2026</time></b> by <b>Divyanshu Choudhury</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/best-practices/acronjob+broadcastjob"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">BroadcastJob + Advanced CronJob Help You Maintain Kubernetes Nodes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/developer-manuals/go-client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Golang client</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kubernetes.slack.com/channels/openkruise" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes Slack ( #openkruise channel )<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/best-practices/">DingTalk (GroupID: 23330762 )</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/best-practices/">WeChat (User: openkruise )</a></li><li class="footer__item"><a href="https://shimo.im/docs/gXqmeQOYBehZ4vqo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/openkruise/community/blob/master/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Membership<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>¬© 2026 The OpenKruise Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
</body>
</html>