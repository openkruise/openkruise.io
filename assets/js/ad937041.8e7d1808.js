"use strict";(self.webpackChunkopenkruise_io=self.webpackChunkopenkruise_io||[]).push([[5872],{28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>o});var s=n(96540);const t={},a=s.createContext(t);function i(e){const r=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(a.Provider,{value:r},e.children)}},85651:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"user-manuals/gameserver-scheduler","title":"GameServer Schedulers","description":"Index Offset Scheduler","source":"@site/kruisegame/user-manuals/gameserver-scheduler.md","sourceDirName":"user-manuals","slug":"/user-manuals/gameserver-scheduler","permalink":"/kruisegame/user-manuals/gameserver-scheduler","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Parship Chowdhury","lastUpdatedAt":1753062712000,"frontMatter":{},"sidebar":"kruisegame","previous":{"title":"OKG Dashboard","permalink":"/kruisegame/user-manuals/game-dashboard"},"next":{"title":"CRD Field Description","permalink":"/kruisegame/user-manuals/crd-field-description"}}');var t=n(74848),a=n(28453);const i={},o="GameServer Schedulers",d={},l=[{value:"Index Offset Scheduler",id:"index-offset-scheduler",level:2},{value:"Install",id:"install",level:3},{value:"Get More",id:"get-more",level:3}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"gameserver-schedulers",children:"GameServer Schedulers"})}),"\n",(0,t.jsx)(r.h2,{id:"index-offset-scheduler",children:"Index Offset Scheduler"}),"\n",(0,t.jsx)(r.p,{children:"Index Offset Scheduler is a custom kubernetes scheduler.\nIt allows pods belonging to the same GameServerSet to be deployed in a rolling manner according to the pod index number, so that the offset/difference of the pod index on each node is as large as possible.\nFor games with rolling server launch, this is a common requirement scenario:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Before the game goes online, due to a large number of reservations or traffic, more game services need to be prepared in advance. In the k8s environment, the id of the game service generally corresponds to the pod number."}),"\n",(0,t.jsx)(r.li,{children:"After the server is launched, the pod load corresponding to the game server will increase significantly, and the load of the machine will increase significantly. If multiple adjacent pods are located on the same node, such as pod-1 and pod-2, the rapid increase in the pod load in a short period of time may require the node configuration to be prepared according to the maximum resources required by the two pods. After a period of time, as the number of active players decreases, the machine load will decrease again."}),"\n",(0,t.jsxs)(r.li,{children:["Therefore, in the scenario of traditional machine deployment, the common practice is to prepare multiple machines in advance and deploy the game services in a rolling deployment manner, so that the node can deploy more services and will not face the risk of a single machine carrying the highest load of multiple game servers in the short term. The deployment effect is similar to the distribution below:","\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"node1: game-1, game-4...\nnode2: game-2, game-5...\nnode3: game-3, game-6...\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"The default k8s scheduler will ensure that pods are distributed as evenly as possible, but it cannot ensure that the difference between pod numbers on each node is as large as possible. It is even possible that two pods with consecutive index numbers are distributed on the same node. Therefore, it is necessary to implement a custom scheduler to make the offset/difference of the pod index on each node as large as possible."}),"\n",(0,t.jsx)(r.h3,{id:"install",children:"Install"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"helm upgrade kruise-game openkruise/kruise-game --version 1.0.0 --set indexOffsetScheduler.enabled=true\n"})}),"\n",(0,t.jsx)(r.h3,{id:"get-more",children:"Get More"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://github.com/CloudNativeGame/index-offset-scheduler",children:"https://github.com/CloudNativeGame/index-offset-scheduler"})})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);