"use strict";(self.webpackChunkopenkruise_io=self.webpackChunkopenkruise_io||[]).push([[3890],{28453:(e,r,l)=>{l.d(r,{R:()=>i,x:()=>o});var s=l(96540);const n={},t=s.createContext(n);function i(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),s.createElement(t.Provider,{value:r},e.children)}},93663:(e,r,l)=>{l.r(r),l.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>a,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"installation","title":"Installation","description":"Requirements","source":"@site/rollouts/installation.md","sourceDirName":".","slug":"/installation","permalink":"/rollouts/installation","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Dedy F. Setyawan","lastUpdatedAt":1752630768000,"frontMatter":{},"sidebar":"rollouts","previous":{"title":"Introduction","permalink":"/rollouts/introduction"},"next":{"title":"API Specifications","permalink":"/rollouts/user-manuals/api-specifications"}}');var n=l(74848),t=l(28453);const i={},o="Installation",d={},c=[{value:"Requirements",id:"requirements",level:2},{value:"Install with helm",id:"install-with-helm",level:2},{value:"Upgrade with helm",id:"upgrade-with-helm",level:2},{value:"Optional: install/upgrade with customized configurations",id:"optional-installupgrade-with-customized-configurations",level:2},{value:"Optional: the local image for China",id:"optional-the-local-image-for-china",level:4},{value:"Uninstall",id:"uninstall",level:2},{value:"What&#39;s Next",id:"whats-next",level:2}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"installation",children:"Installation"})}),"\n",(0,n.jsx)(r.h2,{id:"requirements",children:"Requirements"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Install Kubernetes Cluster, requires ",(0,n.jsx)(r.strong,{children:"Kubernetes version >= 1.19"}),"."]}),"\n",(0,n.jsxs)(r.li,{children:["(Optional, If Use CloneSet) Helm installation of OpenKruise, ",(0,n.jsx)(r.strong,{children:"Since v1.1.0"}),", Reference ",(0,n.jsx)(r.a,{href:"https://openkruise.io/docs/installation",children:"Install OpenKruise"}),"."]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"install-with-helm",children:"Install with helm"}),"\n",(0,n.jsxs)(r.p,{children:["Kruise Rollout can be simply installed by helm v3.1+, which is a simple command-line tool and you can get it from ",(0,n.jsx)(r.a,{href:"https://github.com/helm/helm/releases",children:"here"}),"."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"# Firstly add openkruise charts repository if you haven't do this.\n$ helm repo add openkruise https://openkruise.github.io/charts/\n\n# [Optional]\n$ helm repo update\n\n# Install the latest version.\n$ helm install kruise-rollout openkruise/kruise-rollout --version 0.6.0\n"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Note:"})," ",(0,n.jsx)(r.a,{href:"https://github.com/openkruise/kruise/blob/master/CHANGELOG.md",children:"Changelog"}),"."]}),"\n",(0,n.jsx)(r.h2,{id:"upgrade-with-helm",children:"Upgrade with helm"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"# Firstly add openkruise charts repository if you haven't do this.\n$ helm repo add openkruise https://openkruise.github.io/charts/\n\n# [Optional]\n$ helm repo update\n\n# Upgrade to the latest version.\n$ helm upgrade kruise-rollout openkruise/kruise-rollout --version 0.6.0 [--force]\n"})}),"\n",(0,n.jsx)(r.p,{children:"Note that:"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["Before upgrade, you ",(0,n.jsx)(r.strong,{children:"must"})," firstly read the ",(0,n.jsx)(r.a,{href:"https://github.com/openkruise/rollouts/blob/master/CHANGELOG.md",children:"Change Log"}),"\nto make sure that you have understand the breaking changes in the new version."]}),"\n",(0,n.jsxs)(r.li,{children:["If you want to drop the chart parameters you configured for the old release or set some new parameters,\nit is recommended to add ",(0,n.jsx)(r.code,{children:"--reset-values"})," flag in ",(0,n.jsx)(r.code,{children:"helm upgrade"})," command.\nOtherwise you should use ",(0,n.jsx)(r.code,{children:"--reuse-values"})," flag to reuse the last release's values."]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"optional-installupgrade-with-customized-configurations",children:"Optional: install/upgrade with customized configurations"}),"\n",(0,n.jsxs)(r.p,{children:["The following table lists the configurable parameters of the kruise chart and their default values, more details can be found in ",(0,n.jsx)(r.a,{href:"https://github.com/openkruise/charts/blob/master/versions/kruise-rollout/0.3/values.yaml",children:"this chart repo"}),"."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Parameter"}),(0,n.jsx)(r.th,{children:"Description"}),(0,n.jsx)(r.th,{children:"Default"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"installation.namespace"})}),(0,n.jsx)(r.td,{children:"Namespace for kruise-rollout operation installation"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"kruise-rollout"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"installation.createNamespace"})}),(0,n.jsx)(r.td,{children:"Whether to create the installation.namespace"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"true"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.fullname"})}),(0,n.jsx)(r.td,{children:"Nick name for kruise-rollout deployment and other configurations"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"kruise-rollout-controller-manager"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.featureGates"})}),(0,n.jsx)(r.td,{children:"Feature gates for kruise-rollout, empty string means all disabled"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"AdvancedDeployment=true"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.healthBindPort"})}),(0,n.jsx)(r.td,{children:"Port for checking health of kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"8081"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.metricsBindAddr"})}),(0,n.jsx)(r.td,{children:"Port of metrics served by kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"127.0.0.1:8080"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.log.level"})}),(0,n.jsx)(r.td,{children:"Log level that kruise-rollout printed"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"4"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.webhook.port"})}),(0,n.jsx)(r.td,{children:"Port of webhook served by kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"9876"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rollout.webhook.objectSelector"})}),(0,n.jsx)(r.td,{children:"ObjectSelector for workloads in MutatingWebhookConfigurations"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:" "})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"image.repository"})}),(0,n.jsx)(r.td,{children:"Repository for kruise-rollout image"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"openkruise/kruise-rollout"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"image.tag"})}),(0,n.jsx)(r.td,{children:"Tag for kruise-rollout image"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"v0.3.0"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"image.pullPolicy"})}),(0,n.jsx)(r.td,{children:"ImagePullPolicy for kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Always"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"imagePullSecrets"})}),(0,n.jsx)(r.td,{children:"The list of image pull secrets for kruise-rollout image"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:" "})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"resources.limits.cpu"})}),(0,n.jsx)(r.td,{children:"CPU resource limit of kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"500m"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"resources.limits.memory"})}),(0,n.jsx)(r.td,{children:"Memory resource limit of kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"1Gi"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"resources.requests.cpu"})}),(0,n.jsx)(r.td,{children:"CPU resource request of kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"100m"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"resources.requests.memory"})}),(0,n.jsx)(r.td,{children:"Memory resource request of kruise-rollout container"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"256Mi"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"replicaCount"})}),(0,n.jsx)(r.td,{children:"Replicas of kruise-rollout deployment"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"2"})})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"service.port"})}),(0,n.jsx)(r.td,{children:"Port of webhook served by kruise-rollout webhook service"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"443"})})]})]})]}),"\n",(0,n.jsxs)(r.p,{children:["Specify each parameter using the ",(0,n.jsx)(r.code,{children:"--set key=value[,key=value]"})," argument to ",(0,n.jsx)(r.code,{children:"helm install"}),". For example,"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ helm install kruise-rollout openkruise/kruise-rollout --version 0.6.0 --set resources.limits.memory=2Gi\n"})}),"\n",(0,n.jsx)(r.h4,{id:"optional-the-local-image-for-china",children:"Optional: the local image for China"}),"\n",(0,n.jsx)(r.p,{children:"If you are in China and have problem to pull image from official DockerHub, you can use the registry hosted on Alibaba Cloud:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ helm install kruise https://... --set image.repository=openkruise-registry.cn-shanghai.cr.aliyuncs.com/openkruise/kruise-rollout\n...\n"})}),"\n",(0,n.jsx)(r.h2,{id:"uninstall",children:"Uninstall"}),"\n",(0,n.jsx)(r.p,{children:"Note that this will lead to all resources created by Kruise Rollout, including webhook configurations, services, namespace, CRDs and CR instances Kruise Rollout controller, to be deleted!"}),"\n",(0,n.jsx)(r.p,{children:"Please do this ONLY when you fully understand the consequence."}),"\n",(0,n.jsx)(r.p,{children:"To uninstall kruise rollout if it is installed with helm charts:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:'$ helm uninstall kruise-rollout\nrelease "kruise-rollout" uninstalled\n'})}),"\n",(0,n.jsx)(r.h2,{id:"whats-next",children:"What's Next"}),"\n",(0,n.jsx)(r.p,{children:"Here are some recommended next steps:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["Learn Kruise Rollout's ",(0,n.jsx)(r.a,{href:"/rollouts/user-manuals/basic-usage",children:"Basic Usage Guide"}),"."]}),"\n"]})]})}function a(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);