<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="OpenKruise RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="OpenKruise Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="OpenKruise" href="/zh/opensearch.xml"><title data-react-helmet="true">OpenKruise v1.0ï¼šäº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–è¾¾åˆ°æ–°çš„é«˜å³° | OpenKruise</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://openkruise.io/zh/blog/openkruise-1.0"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="OpenKruise v1.0ï¼šäº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–è¾¾åˆ°æ–°çš„é«˜å³° | OpenKruise"><meta data-react-helmet="true" name="description" content="äº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–ç®¡ç†å¥—ä»¶ã€CNCF Sandbox é¡¹ç›® -- OpenKruiseï¼Œè¿‘æœŸå‘å¸ƒäº† v1.0 å¤§ç‰ˆæœ¬ã€‚"><meta data-react-helmet="true" property="og:description" content="äº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–ç®¡ç†å¥—ä»¶ã€CNCF Sandbox é¡¹ç›® -- OpenKruiseï¼Œè¿‘æœŸå‘å¸ƒäº† v1.0 å¤§ç‰ˆæœ¬ã€‚"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-12-13T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/FillZpp"><meta data-react-helmet="true" property="article:tag" content="release"><link data-react-helmet="true" rel="icon" href="/zh/img/openkruise.ico"><link data-react-helmet="true" rel="canonical" href="https://openkruise.io/zh/blog/openkruise-1.0"><link data-react-helmet="true" rel="alternate" href="https://openkruise.io/blog/openkruise-1.0" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openkruise.io/zh/blog/openkruise-1.0" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://openkruise.io/blog/openkruise-1.0" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/css/styles.0170f992.css">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/runtime~main.995a6b69.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/main.8b22f74b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">â­ï¸ If you like OpenKruise, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openkruise/kruise">GitHub</a>! â­ï¸</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/img/openkruise.ico" alt="OpenKruise" class="themedImage_1VuW themedImage--light_3UqQ"><img src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/img/openkruise.ico" alt="OpenKruise" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">OpenKruise</b></a><a class="navbar__item navbar__link" href="/zh/docs/">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/zh/docs/">v1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/">Next</a></li><li><a class="dropdown__link" href="/zh/docs/">v1.0</a></li><li><a class="dropdown__link" href="/zh/docs/v0.10/">v0.10</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/blog/openkruise-1.0" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh/blog/openkruise-1.0" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Kl_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/zh/blog/openkruise-1.0">OpenKruise v1.0ï¼šäº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–è¾¾åˆ°æ–°çš„é«˜å³°</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/workloadspread">Interpretation for OpenKruise v0.10.0 new feature --- WorkloadSpread</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/openkruise-0.10.0">OpenKruise 0.10.0ï¼šæ–°å¢åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†ã€åº”ç”¨é˜²æŠ¤ç­‰èƒ½åŠ›</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/openkruise-0.9.0">OpenKruise 0.9.0ï¼šæ–°å¢Podå®¹å™¨é‡å¯ã€èµ„æºåˆ é™¤é˜²æŠ¤ç­‰åŠŸèƒ½</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/uniteddeployment">UnitedDeploymemt - Supporting Multi-domain Workload Management</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">OpenKruise v1.0ï¼šäº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–è¾¾åˆ°æ–°çš„é«˜å³°</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-12-13T00:00:00.000Z" itemprop="datePublished">2021å¹´12æœˆ13æ—¥</time> Â· <!-- -->é˜…è¯»éœ€è¦ 1 åˆ†é’Ÿ</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/FillZpp.png" alt="Siyu Wang"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Siyu Wang</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of OpenKruise</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>äº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–ç®¡ç†å¥—ä»¶ã€CNCF Sandbox é¡¹ç›® -- OpenKruiseï¼Œè¿‘æœŸå‘å¸ƒäº† v1.0 å¤§ç‰ˆæœ¬ã€‚</p><p><a href="https://openkruise.io" target="_blank" rel="noopener noreferrer">OpenKruise</a> æ˜¯é’ˆå¯¹ Kubernetes çš„å¢å¼ºèƒ½åŠ›å¥—ä»¶ï¼Œèšç„¦äºäº‘åŸç”Ÿåº”ç”¨çš„éƒ¨ç½²ã€å‡çº§ã€è¿ç»´ã€ç¨³å®šæ€§é˜²æŠ¤ç­‰é¢†åŸŸã€‚æ‰€æœ‰çš„åŠŸèƒ½éƒ½é€šè¿‡ CRD ç­‰æ ‡å‡†æ–¹å¼æ‰©å±•ï¼Œå¯ä»¥é€‚ç”¨äº 1.16 ä»¥ä¸Šç‰ˆæœ¬çš„ä»»æ„ Kubernetes é›†ç¾¤ã€‚å•æ¡ helm å‘½ä»¤å³å¯å®Œæˆ Kruise çš„ä¸€é”®éƒ¨ç½²ï¼Œæ— éœ€æ›´å¤šé…ç½®ã€‚</p><p><img alt="openkruise-features|center|450x400" src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/images/features-zh-8ffa4c48195f95d40dee1f0f7e3565bb.png"></p><p>æ€»å¾—æ¥çœ‹ï¼Œç›®å‰ OpenKruise æä¾›çš„èƒ½åŠ›åˆ†ä¸ºå‡ ä¸ªé¢†åŸŸï¼š</p><ul><li><strong>åº”ç”¨å·¥ä½œè´Ÿè½½</strong>ï¼šé¢å‘æ— çŠ¶æ€ã€æœ‰çŠ¶æ€ã€daemon ç­‰å¤šç§ç±»å‹åº”ç”¨çš„é«˜çº§éƒ¨ç½²å‘å¸ƒç­–ç•¥ï¼Œä¾‹å¦‚åŸåœ°å‡çº§ã€ç°åº¦æµå¼å‘å¸ƒç­‰ã€‚</li><li><strong>Sidecar å®¹å™¨ç®¡ç†</strong>ï¼šæ”¯æŒç‹¬ç«‹å®šä¹‰ sidecar å®¹å™¨ï¼Œå®ŒæˆåŠ¨æ€æ³¨å…¥ã€ç‹¬ç«‹åŸåœ°å‡çº§ã€çƒ­å‡çº§ç­‰åŠŸèƒ½ã€‚</li><li><strong>å¢å¼ºè¿ç»´èƒ½åŠ›</strong>ï¼šåŒ…æ‹¬å®¹å™¨åŸåœ°é‡å¯ã€é•œåƒé¢„æ‹‰å–ã€å®¹å™¨å¯åŠ¨é¡ºåºä¿éšœç­‰ã€‚</li><li><strong>åº”ç”¨åˆ†åŒºç®¡ç†</strong>ï¼šç®¡ç†åº”ç”¨åœ¨å¤šä¸ªåˆ†åŒºï¼ˆå¯ç”¨åŒºã€ä¸åŒæœºå‹ç­‰ï¼‰ä¸Šçš„éƒ¨ç½²æ¯”ä¾‹ã€é¡ºåºã€ä¼˜å…ˆçº§ç­‰ã€‚</li><li><strong>åº”ç”¨å®‰å…¨é˜²æŠ¤</strong>ï¼šå¸®åŠ©åº”ç”¨åœ¨ Kubernetes ä¹‹ä¸Šè·å¾—æ›´é«˜çš„å®‰å…¨æ€§ä¿éšœä¸å¯ç”¨æ€§é˜²æŠ¤ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="ç‰ˆæœ¬è§£æ">ç‰ˆæœ¬è§£æ<a aria-hidden="true" class="hash-link" href="#ç‰ˆæœ¬è§£æ" title="Direct link to heading">â€‹</a></h2><p>åœ¨ v1.0 å¤§ç‰ˆæœ¬ä¸­ï¼ŒOpenKruise å¸¦æ¥äº†å¤šç§æ–°çš„ç‰¹æ€§ï¼ŒåŒæ—¶ä¹Ÿå¯¹ä¸å°‘å·²æœ‰åŠŸèƒ½åšäº†å¢å¼ºä¸ä¼˜åŒ–ã€‚</p><p>é¦–å…ˆè¦è¯´çš„æ˜¯ï¼Œä» v1.0 å¼€å§‹ OpenKruise å°† CRD/WehhookConfiguration ç­‰èµ„æºé…ç½®çš„ç‰ˆæœ¬ä» <code>v1beta1</code> å‡çº§åˆ° <code>v1</code>ï¼Œå› æ­¤å¯ä»¥<strong>æ”¯æŒ Kubernetes v1.22 åŠä»¥ä¸Šç‰ˆæœ¬çš„é›†ç¾¤ï¼Œä½†åŒæ—¶ä¹Ÿè¦æ±‚ Kubernetes çš„ç‰ˆæœ¬ä¸èƒ½ä½äº v1.16</strong>ã€‚</p><p>ä»¥ä¸‹å¯¹ v1.0 çš„éƒ¨åˆ†åŠŸèƒ½åšç®€è¦ä»‹ç»ï¼Œè¯¦ç»†çš„ ChangeLog åˆ—è¡¨è¯·æŸ¥çœ‹ OpenKruise Github ä¸Šçš„ release è¯´æ˜ä»¥åŠå®˜ç½‘æ–‡æ¡£ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="1-æ”¯æŒç¯å¢ƒå˜é‡åŸåœ°å‡çº§">1. æ”¯æŒç¯å¢ƒå˜é‡åŸåœ°å‡çº§<a aria-hidden="true" class="hash-link" href="#1-æ”¯æŒç¯å¢ƒå˜é‡åŸåœ°å‡çº§" title="Direct link to heading">â€‹</a></h3><p><em>Author: <a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer">@FillZpp</a></em></p><p>OpenKruise ä»æ—©æœŸç‰ˆæœ¬å¼€å§‹å°±æ”¯æŒäº† â€œåŸåœ°å‡çº§â€ åŠŸèƒ½ï¼Œä¸»è¦åº”ç”¨äº CloneSet ä¸ Advanced StatefulSet ä¸¤ç§å·¥ä½œè´Ÿè½½ä¸Šã€‚ç®€å•æ¥è¯´ï¼ŒåŸåœ°å‡çº§ä½¿å¾—åº”ç”¨åœ¨å‡çº§çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦åˆ é™¤ã€æ–°å»º Pod å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡å¯¹ Pod ä¸­å®¹å™¨é…ç½®çš„ä¿®æ”¹æ¥è¾¾åˆ°å‡çº§çš„ç›®çš„ã€‚</p><p><img alt="inplace-update-comparation|center|450x400" src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/images/inplace-update-comparation-fc948df195e332f578d4967c34b0c3d3.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒåŸåœ°å‡çº§è¿‡ç¨‹ä¸­åªä¿®æ”¹äº† Pod ä¸­çš„å­—æ®µï¼Œå› æ­¤ï¼š</p><ol><li>å¯ä»¥é¿å…å¦‚ <em>è°ƒåº¦</em>ã€<em>åˆ†é… IP</em>ã€<em>åˆ†é…ã€æŒ‚è½½ç›˜</em> ç­‰é¢å¤–çš„æ“ä½œå’Œä»£ä»·ã€‚</li><li>æ›´å¿«çš„é•œåƒæ‹‰å–ï¼Œå› ä¸ºå¯ä»¥å¤ç”¨å·²æœ‰æ—§é•œåƒçš„å¤§éƒ¨åˆ† layer å±‚ï¼Œåªéœ€è¦æ‹‰å–æ–°é•œåƒå˜åŒ–çš„ä¸€äº› layerã€‚</li><li>å½“ä¸€ä¸ªå®¹å™¨åœ¨åŸåœ°å‡çº§æ—¶ï¼ŒPod çš„ç½‘ç»œã€æŒ‚è½½ç›˜ã€ä»¥åŠ Pod ä¸­çš„å…¶ä»–å®¹å™¨ä¸ä¼šå—åˆ°å½±å“ï¼Œä»ç„¶ç»´æŒè¿è¡Œã€‚</li></ol><p>ç„¶è€Œï¼ŒOpenKruise è¿‡å»åªèƒ½å¯¹ Pod ä¸­ image å­—æ®µçš„æ›´æ–°åšåŸåœ°å‡çº§ï¼Œå¯¹äºå…¶ä»–å­—æ®µä»ç„¶åªèƒ½é‡‡ç”¨ä¸ Deployment ç›¸ä¼¼çš„é‡å»ºå‡çº§ã€‚ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘ä»¬æ”¶åˆ°å¾ˆå¤šç”¨æˆ·åé¦ˆï¼Œå¸Œæœ›æ”¯æŒå¯¹ env ç­‰æ›´å¤šå­—æ®µçš„åŸåœ°å‡çº§ -- ç”±äºå—åˆ° kube-apiserver çš„é™åˆ¶ï¼Œè¿™æ˜¯å¾ˆéš¾åšåˆ°çš„ã€‚</p><p>ç»è¿‡æˆ‘ä»¬çš„ä¸æ‡ˆåŠªåŠ›ï¼ŒOpenKruise ç»ˆäºåœ¨ v1.0 ç‰ˆæœ¬ä¸­ï¼Œæ”¯æŒäº†é€šè¿‡ Downward API çš„æ–¹å¼æ”¯æŒäº† env ç¯å¢ƒå˜é‡çš„åŸåœ°å‡çº§ã€‚ä¾‹å¦‚å¯¹ä»¥ä¸‹CloneSet YAMLï¼Œç”¨æˆ·å°†é…ç½®å®šä¹‰åœ¨ annotation ä¸­å¹¶å…³è”åˆ°å¯¹åº” env ä¸­ã€‚åç»­åœ¨ä¿®æ”¹é…ç½®æ—¶ï¼Œåªéœ€è¦æ›´æ–° annotation value ä¸­çš„å€¼ï¼ŒKruise å°±ä¼šå¯¹ Pod ä¸­æ‰€æœ‰ env é‡Œå¼•ç”¨äº†è¿™ä¸ª annotation çš„å®¹å™¨è§¦å‘åŸåœ°é‡å»ºï¼Œä»è€Œç”Ÿæ•ˆè¿™ä¸ªæ–°çš„ value é…ç½®ã€‚</p><div class="codeBlockContainer_K1bP language-yaml"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CloneSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app-config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;... the real env value ...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> APP_CONFIG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">fieldRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">fieldPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata.annotations</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;app-config&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><em>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ä¹Ÿå»é™¤äº†è¿‡å»å¯¹é•œåƒåŸåœ°å‡çº§çš„<code>imageID</code>é™åˆ¶ï¼Œå³æ”¯æŒç›¸åŒimageIDçš„ä¸¤ä¸ªé•œåƒæ›¿æ¢å‡çº§ã€‚</em></p><p>å…·ä½“ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ<a href="/zh/docs/core-concepts/inplace-update">æ–‡æ¡£</a>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="2-é…ç½®è·¨å‘½åç©ºé—´åˆ†å‘">2. é…ç½®è·¨å‘½åç©ºé—´åˆ†å‘<a aria-hidden="true" class="hash-link" href="#2-é…ç½®è·¨å‘½åç©ºé—´åˆ†å‘" title="Direct link to heading">â€‹</a></h3><p><em>Author: <a href="https://github.com/veophi" target="_blank" rel="noopener noreferrer">@veophi</a></em></p><p>åœ¨å¯¹ Secretã€ConfigMap ç­‰ namespace-scoped èµ„æºè¿›è¡Œè·¨ namespace åˆ†å‘åŠåŒæ­¥çš„åœºæ™¯ä¸­ï¼ŒåŸç”Ÿ kubernetes ç›®å‰åªæ”¯æŒç”¨æˆ· one-by-one åœ°è¿›è¡Œæ‰‹åŠ¨åˆ†å‘ä¸åŒæ­¥ï¼Œååˆ†åœ°ä¸æ–¹ä¾¿ã€‚</p><p>å…¸å‹çš„æ¡ˆä¾‹æœ‰ï¼š</p><ul><li>å½“ç”¨æˆ·éœ€è¦ä½¿ç”¨ SidecarSet çš„ imagePullSecrets èƒ½åŠ›æ—¶ï¼Œè¦å…ˆé‡å¤åœ°åœ¨ç›¸å…³ namespaces ä¸­åˆ›å»ºå¯¹åº”çš„ Secretï¼Œå¹¶ä¸”éœ€è¦ç¡®ä¿è¿™äº› Secret é…ç½®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li><li>å½“ç”¨æˆ·æƒ³è¦é‡‡ç”¨ ConfigMap æ¥é…ç½®ä¸€äº›<strong>é€šç”¨</strong>çš„ç¯å¢ƒå˜é‡æ—¶ï¼Œå¾€å¾€éœ€è¦åœ¨å¤šä¸ª namespaces åš ConfigMap çš„ä¸‹å‘ï¼Œå¹¶ä¸”åç»­çš„ä¿®æ”¹å¾€å¾€ä¹Ÿè¦æ±‚å¤š namespaces ä¹‹é—´ä¿æŒåŒæ­¥ã€‚</li></ul><p>å› æ­¤ï¼Œé¢å¯¹è¿™äº›éœ€è¦è·¨ namespaces è¿›è¡Œèµ„æºåˆ†å‘å’Œ<strong>å¤šæ¬¡åŒæ­¥</strong>çš„åœºæ™¯ï¼Œæˆ‘ä»¬æœŸæœ›ä¸€ç§æ›´ä¾¿æ·çš„åˆ†å‘å’ŒåŒæ­¥å·¥å…·æ¥è‡ªåŠ¨åŒ–åœ°å»åšè¿™ä»¶äº‹ï¼Œä¸ºæ­¤æˆ‘ä»¬è®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ªæ–°çš„CRD --- <strong>ResourceDistribution</strong>ã€‚</p><p>ResourceDistribution ç›®å‰æ”¯æŒ <strong>Secret</strong> å’Œ <strong>ConfigMap</strong> ä¸¤ç±»èµ„æºçš„åˆ†å‘å’ŒåŒæ­¥ã€‚</p><div class="codeBlockContainer_K1bP language-yaml"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ResourceDistribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resource</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">namespaceLabelSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># or includedNamespaces, excludedNamespaces</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å¦‚ä¸Šè¿° YAML æ‰€ç¤ºï¼ŒResourceDistributionæ˜¯ä¸€ç±» <strong>cluster-scoped</strong> çš„ CRDï¼Œå…¶ä¸»è¦ç”± <strong><code>resource</code></strong> å’Œ <strong><code>targets</code></strong> ä¸¤ä¸ªå­—æ®µæ„æˆï¼Œå…¶ä¸­ <strong><code>resource</code></strong> å­—æ®µç”¨äºæè¿°ç”¨æˆ·æ‰€è¦åˆ†å‘çš„èµ„æºï¼Œ<strong><code>targets</code></strong> å­—æ®µç”¨äºæè¿°ç”¨æˆ·æ‰€è¦åˆ†å‘çš„ç›®æ ‡å‘½åç©ºé—´ã€‚</p><p>å…·ä½“ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ<a href="/zh/docs/user-manuals/resourcedistribution">æ–‡æ¡£</a>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="3-å®¹å™¨å¯åŠ¨é¡ºåºæ§åˆ¶">3. å®¹å™¨å¯åŠ¨é¡ºåºæ§åˆ¶<a aria-hidden="true" class="hash-link" href="#3-å®¹å™¨å¯åŠ¨é¡ºåºæ§åˆ¶" title="Direct link to heading">â€‹</a></h3><p><em>Author: <a href="https://github.com/Concurrensee" target="_blank" rel="noopener noreferrer">@Concurrensee</a></em></p><p>å¯¹äº Kubernetes çš„ä¸€ä¸ª Podï¼Œå…¶ä¸­çš„å¤šä¸ªå®¹å™¨å¯èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚ å®¹å™¨B ä¸­åº”ç”¨è¿›ç¨‹çš„è¿è¡Œä¾èµ–äº å®¹å™¨A ä¸­çš„åº”ç”¨ã€‚å› æ­¤ï¼Œå¤šä¸ªå®¹å™¨ä¹‹é—´å­˜åœ¨é¡ºåºå…³ç³»çš„éœ€æ±‚ï¼š</p><ul><li>å®¹å™¨A å…ˆå¯åŠ¨ï¼Œå¯åŠ¨æˆåŠŸåæ‰å¯ä»¥å¯åŠ¨ å®¹å™¨B</li><li>å®¹å™¨B å…ˆé€€å‡ºï¼Œé€€å‡ºå®Œæˆåæ‰å¯ä»¥åœæ­¢ å®¹å™¨A</li></ul><p>é€šå¸¸æ¥è¯´ Pod å®¹å™¨çš„å¯åŠ¨å’Œé€€å‡ºé¡ºåºæ˜¯ç”± Kubelet ç®¡ç†çš„ã€‚Kubernetes æ›¾ç»æœ‰ä¸€ä¸ª KEP è®¡åˆ’åœ¨ container ä¸­å¢åŠ ä¸€ä¸ª type å­—æ®µæ¥æ ‡è¯†ä¸åŒç±»å‹å®¹å™¨çš„å¯åœä¼˜å…ˆçº§ã€‚ä½†æ˜¯ç”±äº sig-node è€ƒè™‘åˆ°å¯¹ç°æœ‰ä»£ç æ¶æ„çš„æ”¹åŠ¨å¤ªå¤§ï¼Œç›®å‰è¿™ä¸ª KEP å·²ç»è¢«æ‹’ç»äº†ã€‚</p><p>å› æ­¤ï¼ŒOpenKruise åœ¨ v1.0 ä¸­æä¾›äº†åä¸º <strong>Container Launch Priority</strong> çš„åŠŸèƒ½ï¼Œç”¨äºæ§åˆ¶ä¸€ä¸ª Pod ä¸­å¤šä¸ªå®¹å™¨çš„å¼ºåˆ¶å¯åŠ¨é¡ºåºï¼š</p><ol><li>å¯¹äºä»»æ„ä¸€ä¸ª Pod å¯¹è±¡ï¼Œåªéœ€è¦åœ¨ annotations ä¸­å®šä¹‰ <code>apps.kruise.io/container-launch-priority: Ordered</code>ï¼Œåˆ™ Kruise ä¼šæŒ‰ç…§ Pod ä¸­ <code>containers</code> å®¹å™¨åˆ—è¡¨çš„é¡ºåºæ¥ä¿è¯å…¶ä¸­å®¹å™¨çš„ä¸²è¡Œå¯åŠ¨ã€‚</li><li>å¦‚æœè¦è‡ªå®šä¹‰ <code>containers</code> ä¸­å¤šä¸ªå®¹å™¨çš„å¯åŠ¨é¡ºåºï¼Œåˆ™åœ¨å®¹å™¨ env ä¸­æ·»åŠ  <code>KRUISE_CONTAINER_PRIORITY</code> ç¯å¢ƒå˜é‡ï¼Œvalue å€¼æ˜¯èŒƒå›´åœ¨ <code>[-2147483647, 2147483647]</code> çš„æ•´æ•°ã€‚ä¸€ä¸ªå®¹å™¨çš„ priority å€¼è¶Šå¤§ï¼Œä¼šä¿è¯è¶Šå…ˆå¯åŠ¨ã€‚</li></ol><p>å…·ä½“ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ<a href="/zh/docs/user-manuals/containerlaunchpriority">æ–‡æ¡£</a>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="4-kubectl-kruise-å‘½ä»¤è¡Œå·¥å…·">4. <code>kubectl-kruise</code> å‘½ä»¤è¡Œå·¥å…·<a aria-hidden="true" class="hash-link" href="#4-kubectl-kruise-å‘½ä»¤è¡Œå·¥å…·" title="Direct link to heading">â€‹</a></h3><p><em>Author: <a href="https://github.com/hantmac" target="_blank" rel="noopener noreferrer">@hantmac</a></em></p><p>è¿‡å» OpenKruise æ˜¯é€šè¿‡ kruise-apiã€client-java ç­‰ä»“åº“æä¾›äº† Goã€Java ç­‰è¯­è¨€çš„ Kruise API å®šä¹‰ä»¥åŠå®¢æˆ·ç«¯å°è£…ï¼Œå¯ä¾›ç”¨æˆ·åœ¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­å¼•å…¥ä½¿ç”¨ã€‚ä½†ä»ç„¶æœ‰ä¸å°‘ç”¨æˆ·åœ¨æµ‹è¯•ç¯å¢ƒä¸‹éœ€è¦çµæ´»åœ°ç”¨å‘½ä»¤è¡Œæ“ä½œ workload èµ„æºã€‚</p><p>ç„¶è€ŒåŸç”Ÿ <code>kubectl</code> å·¥å…·æä¾›çš„ <code>rollout</code>ã€<code>set image</code> ç­‰å‘½ä»¤åªèƒ½é€‚ç”¨äºåŸç”Ÿçš„ workload ç±»å‹ï¼Œå¦‚ Deploymentã€StatefulSetï¼Œå¹¶ä¸èƒ½è¯†åˆ« OpenKruise ä¸­æ‰©å±•çš„ workload ç±»å‹ã€‚</p><p>å› æ­¤ï¼ŒOpenKruise æœ€æ–°æä¾›äº† <code>kubectl-kruise</code> å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒæ˜¯ <code>kubectl</code> çš„æ ‡å‡†æ’ä»¶ï¼Œæä¾›äº†è®¸å¤šé€‚ç”¨äº OpenKruise workload çš„åŠŸèƒ½ã€‚</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># rollout undo cloneset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kruise rollout undo cloneset/nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#  rollout status advanced statefulset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kruise rollout status statefulsets.apps.kruise.io/sts-demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># set image of a cloneset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl kruise </span><span class="token builtin class-name">set</span><span class="token plain"> image cloneset/nginx </span><span class="token assign-left variable" style="color:#36acaa">busybox</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">busybox </span><span class="token assign-left variable" style="color:#36acaa">nginx</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nginx:1.9.1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å…·ä½“ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒ<a href="/zh/docs/cli-tool/kubectl-plugin">æ–‡æ¡£</a>ã€‚</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="5-å…¶ä½™éƒ¨åˆ†åŠŸèƒ½æ”¹è¿›ä¸ä¼˜åŒ–">5. å…¶ä½™éƒ¨åˆ†åŠŸèƒ½æ”¹è¿›ä¸ä¼˜åŒ–<a aria-hidden="true" class="hash-link" href="#5-å…¶ä½™éƒ¨åˆ†åŠŸèƒ½æ”¹è¿›ä¸ä¼˜åŒ–" title="Direct link to heading">â€‹</a></h3><p><strong>CloneSet:</strong></p><ul><li>é€šè¿‡ <code>scaleStrategy.maxUnavailable</code> ç­–ç•¥æ”¯æŒæµå¼æ‰©å®¹</li><li>Stable revision åˆ¤æ–­é€»è¾‘å˜åŒ–ï¼Œå½“æ‰€æœ‰ Pod ç‰ˆæœ¬ä¸ updateRevision ä¸€è‡´æ—¶åˆ™æ ‡è®°ä¸º currentRevision</li></ul><p><strong>WorkloadSpread:</strong></p><ul><li>æ”¯æŒæ¥ç®¡å­˜é‡ Pod åˆ°åŒ¹é…çš„ subset åˆ†ç»„ä¸­</li><li>ä¼˜åŒ– webhook åœ¨ Pod æ³¨å…¥æ—¶çš„æ›´æ–°ä¸é‡è¯•é€»è¾‘</li></ul><p><strong>Advanced DaemonSet:</strong></p><ul><li>æ”¯æŒå¯¹ Daemon Pod åšåŸåœ°å‡çº§</li><li>å¼•å…¥ progressive annotation æ¥é€‰æ‹©æ˜¯å¦æŒ‰ partition é™åˆ¶ Pod åˆ›å»º</li></ul><p><strong>SidecarSet:</strong></p><ul><li>è§£å†³ SidecarSet è¿‡æ»¤å±è”½ inactive Pod</li><li>åœ¨ <code>transferenv</code> ä¸­æ–°å¢ <code>SourceContainerNameFrom</code> å’Œ <code>EnvNames</code> å­—æ®µï¼Œæ¥è§£å†³ container name ä¸ä¸€è‡´ä¸å¤§é‡ env æƒ…å†µä¸‹çš„å†—ä½™é—®é¢˜</li></ul><p><strong>PodUnavailableBudget:</strong></p><ul><li>æ–°å¢ â€œè·³è¿‡ä¿æŠ¤â€ æ ‡è¯†</li><li>PodUnavailableBudget controller å…³æ³¨ workload å·¥ä½œè´Ÿè½½çš„ replicas å˜åŒ–</li></ul><p><strong>NodeImage:</strong></p><ul><li>åŠ å…¥ <code>--nodeimage-creation-delay</code> å‚æ•°ï¼Œå¹¶é»˜è®¤ç­‰å¾…æ–°å¢ Node ready ä¸€æ®µæ—¶é—´ååŒæ­¥åˆ›å»º NodeImage</li></ul><p><strong>UnitedDeployment:</strong></p><ul><li>è§£å†³ <code>NodeSelectorTerms</code> ä¸º nil æƒ…å†µä¸‹ Pod <code>NodeSelectorTerms</code> é•¿åº¦ä¸º 0 çš„é—®é¢˜</li></ul><p><strong>Other optimization:</strong></p><ul><li>kruise-daemon é‡‡ç”¨ protobuf åè®®æ“ä½œ Pod èµ„æº</li><li>æš´éœ² cache resync ä¸ºå‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶åœ¨ chart ä¸­è®¾ç½®é»˜è®¤å€¼ä¸º 0</li><li>è§£å†³ certs æ›´æ–°æ—¶çš„ http checker åˆ·æ–°é—®é¢˜</li><li>å»é™¤å¯¹ forked controller-tools çš„ä¾èµ–ï¼Œæ”¹ä¸ºä½¿ç”¨åŸç”Ÿ controller-tools é…åˆ markers æ³¨è§£</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="ç¤¾åŒºå‚ä¸">ç¤¾åŒºå‚ä¸<a aria-hidden="true" class="hash-link" href="#ç¤¾åŒºå‚ä¸" title="Direct link to heading">â€‹</a></h2><p>éå¸¸æ¬¢è¿ä½ é€šè¿‡ Github/Slack/é’‰é’‰/å¾®ä¿¡ ç­‰æ–¹å¼åŠ å…¥æˆ‘ä»¬æ¥å‚ä¸ OpenKruise å¼€æºç¤¾åŒºã€‚
ä½ æ˜¯å¦å·²ç»æœ‰ä¸€äº›å¸Œæœ›ä¸æˆ‘ä»¬ç¤¾åŒºäº¤æµçš„å†…å®¹å‘¢ï¼Ÿ
å¯ä»¥åœ¨æˆ‘ä»¬çš„<a href="https://shimo.im/docs/gXqmeQOYBehZ4vqo" target="_blank" rel="noopener noreferrer">ç¤¾åŒºåŒå‘¨ä¼š</a>ä¸Šåˆ†äº«ä½ çš„å£°éŸ³ï¼Œæˆ–é€šè¿‡ä»¥ä¸‹æ¸ é“å‚ä¸è®¨è®ºï¼š</p><ul><li>åŠ å…¥ç¤¾åŒº <a href="https://kubernetes.slack.com/channels/openkruise" target="_blank" rel="noopener noreferrer">Slack channel</a> (English)</li><li>åŠ å…¥ç¤¾åŒºé’‰é’‰ç¾¤ï¼šæœç´¢ç¾¤å· <code>23330762</code> (Chinese)</li><li>åŠ å…¥ç¤¾åŒºå¾®ä¿¡ç¾¤ï¼šæ·»åŠ ç”¨æˆ· <code>openkruise</code> å¹¶è®©æœºå™¨äººæ‹‰ä½ å…¥ç¾¤ (Chinese)</li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/zh/blog/tags/release">release</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/openkruise/openkruise.io/tree/master/blog/blog/2021-12-13-release-1.0.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æœ¬é¡µ</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/blog/workloadspread"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Interpretation for OpenKruise v0.10.0 new feature --- WorkloadSpread<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç‰ˆæœ¬è§£æ" class="table-of-contents__link toc-highlight">ç‰ˆæœ¬è§£æ</a><ul><li><a href="#1-æ”¯æŒç¯å¢ƒå˜é‡åŸåœ°å‡çº§" class="table-of-contents__link toc-highlight">1. æ”¯æŒç¯å¢ƒå˜é‡åŸåœ°å‡çº§</a></li><li><a href="#2-é…ç½®è·¨å‘½åç©ºé—´åˆ†å‘" class="table-of-contents__link toc-highlight">2. é…ç½®è·¨å‘½åç©ºé—´åˆ†å‘</a></li><li><a href="#3-å®¹å™¨å¯åŠ¨é¡ºåºæ§åˆ¶" class="table-of-contents__link toc-highlight">3. å®¹å™¨å¯åŠ¨é¡ºåºæ§åˆ¶</a></li><li><a href="#4-kubectl-kruise-å‘½ä»¤è¡Œå·¥å…·" class="table-of-contents__link toc-highlight">4. <code>kubectl-kruise</code> å‘½ä»¤è¡Œå·¥å…·</a></li><li><a href="#5-å…¶ä½™éƒ¨åˆ†åŠŸèƒ½æ”¹è¿›ä¸ä¼˜åŒ–" class="table-of-contents__link toc-highlight">5. å…¶ä½™éƒ¨åˆ†åŠŸèƒ½æ”¹è¿›ä¸ä¼˜åŒ–</a></li></ul></li><li><a href="#ç¤¾åŒºå‚ä¸" class="table-of-contents__link toc-highlight">ç¤¾åŒºå‚ä¸</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/installation">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://kubernetes.slack.com/channels/openkruise" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Kubernetes Slack ( #openkruise channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog/">DingTalk (GroupID: 23330762 )</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog/">WeChat (User: openkruise )</a></li><li class="footer__item"><a href="https://shimo.im/docs/gXqmeQOYBehZ4vqo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/openkruise/community/blob/master/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Community Membership<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© 2021 The OpenKruise Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
<script src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/runtime~main.995a6b69.js"></script>
<script src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/main.8b22f74b.js"></script>
</body>
</html>