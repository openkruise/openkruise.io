<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="OpenKruise RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="OpenKruise Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="OpenKruise" href="/zh/opensearch.xml"><title data-react-helmet="true">OpenKruise 0.10.0ï¼šæ–°å¢åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†ã€åº”ç”¨é˜²æŠ¤ç­‰èƒ½åŠ› | OpenKruise</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://openkruise.io/zh/blog/openkruise-0.10.0"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="OpenKruise 0.10.0ï¼šæ–°å¢åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†ã€åº”ç”¨é˜²æŠ¤ç­‰èƒ½åŠ› | OpenKruise"><meta data-react-helmet="true" name="description" content="æœ¬æ–‡å°†å¸¦ä½ ä¸€è§ˆ v0.10.0 çš„æ–°å˜åŒ–ï¼Œå…¶ä¸­æ–°å¢çš„ WorkloadSpreadã€PodUnavailableBudget ç­‰å¤§é¢—ç²’ç‰¹æ€§åç»­è¿˜å°†æœ‰ä¸“æ–‡è¯¦ç»†ä»‹ç»å…¶è®¾è®¡å®ç°åŸç†ã€‚"><meta data-react-helmet="true" property="og:description" content="æœ¬æ–‡å°†å¸¦ä½ ä¸€è§ˆ v0.10.0 çš„æ–°å˜åŒ–ï¼Œå…¶ä¸­æ–°å¢çš„ WorkloadSpreadã€PodUnavailableBudget ç­‰å¤§é¢—ç²’ç‰¹æ€§åç»­è¿˜å°†æœ‰ä¸“æ–‡è¯¦ç»†ä»‹ç»å…¶è®¾è®¡å®ç°åŸç†ã€‚"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-09-06T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/FillZpp"><meta data-react-helmet="true" property="article:tag" content="release"><link data-react-helmet="true" rel="icon" href="/zh/img/openkruise.ico"><link data-react-helmet="true" rel="canonical" href="https://openkruise.io/zh/blog/openkruise-0.10.0"><link data-react-helmet="true" rel="alternate" href="https://openkruise.io/blog/openkruise-0.10.0" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openkruise.io/zh/blog/openkruise-0.10.0" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://openkruise.io/blog/openkruise-0.10.0" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/css/styles.0170f992.css">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/runtime~main.14fdc4d9.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/main.8507f4ee.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">â­ï¸ If you like OpenKruise, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openkruise/kruise">GitHub</a>! â­ï¸</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/img/openkruise.ico" alt="OpenKruise" class="themedImage_1VuW themedImage--light_3UqQ"><img src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/img/openkruise.ico" alt="OpenKruise" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">OpenKruise</b></a><a class="navbar__item navbar__link" href="/zh/docs/">æ–‡æ¡£</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/zh/docs/">v1.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/zh/docs/next/">Next</a></li><li><a class="dropdown__link" href="/zh/docs/">v1.0</a></li><li><a class="dropdown__link" href="/zh/docs/v0.10/">v0.10</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ç®€ä½“ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/blog/openkruise-0.10.0" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/zh/blog/openkruise-0.10.0" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ç®€ä½“ä¸­æ–‡</a></li></ul></div><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ğŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ğŸŒ</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Kl_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">All posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/openkruise-1.0">OpenKruise v1.0ï¼šäº‘åŸç”Ÿåº”ç”¨è‡ªåŠ¨åŒ–è¾¾åˆ°æ–°çš„é«˜å³°</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/workloadspread">OpenKruise v0.10.0 æ–°ç‰¹æ€§WorkloadSpreadè§£è¯»</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/zh/blog/openkruise-0.10.0">OpenKruise 0.10.0ï¼šæ–°å¢åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†ã€åº”ç”¨é˜²æŠ¤ç­‰èƒ½åŠ›</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/sidecarset-hotupdate">OpenKruise 0.9.0, SidecarSet Helps Mesh Container Hot Upgrade</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/openkruise-0.9.0">OpenKruise 0.9.0ï¼šæ–°å¢Podå®¹å™¨é‡å¯ã€èµ„æºåˆ é™¤é˜²æŠ¤ç­‰åŠŸèƒ½</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/sidecarset">OpenKruise 0.8.0, A Powerful Tool for Sidecar Container Management</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/uniteddeployment">UnitedDeploymemt - Supporting Multi-domain Workload Management</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/learning-concurrent-reconciling">Learning Concurrent Reconciling</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/zh/blog/workload-classification-guidance">Kruise Workload Classification Guidance</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">OpenKruise 0.10.0ï¼šæ–°å¢åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†ã€åº”ç”¨é˜²æŠ¤ç­‰èƒ½åŠ›</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-06T00:00:00.000Z" itemprop="datePublished">2021å¹´9æœˆ6æ—¥</time> Â· <!-- -->é˜…è¯»éœ€è¦ 1 åˆ†é’Ÿ</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://github.com/FillZpp.png" alt="Siyu Wang"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FillZpp" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Siyu Wang</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of OpenKruise</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>æœ¬æ–‡å°†å¸¦ä½ ä¸€è§ˆ v0.10.0 çš„æ–°å˜åŒ–ï¼Œå…¶ä¸­æ–°å¢çš„ WorkloadSpreadã€PodUnavailableBudget ç­‰å¤§é¢—ç²’ç‰¹æ€§åç»­è¿˜å°†æœ‰ä¸“æ–‡è¯¦ç»†ä»‹ç»å…¶è®¾è®¡å®ç°åŸç†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="workloadspreadæ—è·¯çš„åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†èƒ½åŠ›">WorkloadSpreadï¼šæ—è·¯çš„åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†èƒ½åŠ›<a aria-hidden="true" class="hash-link" href="#workloadspreadæ—è·¯çš„åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†èƒ½åŠ›" title="Direct link to heading">â€‹</a></h2><p>åœ¨åº”ç”¨éƒ¨ç½²è¿ç»´çš„åœºæ™¯ä¸‹ï¼Œæœ‰ç€å¤šç§å¤šæ ·çš„æ‹“æ‰‘æ‰“æ•£ä»¥åŠå¼¹æ€§çš„è¯‰æ±‚ã€‚å…¶ä¸­æœ€å¸¸è§ã€æœ€åŸºæœ¬çš„ï¼Œå°±æ˜¯æŒ‰æŸç§æˆ–å‡ ç§æ‹“æ‰‘æ°´å¹³æ‰“æ•£ï¼Œæ¯”å¦‚ï¼š</p><ul><li>åº”ç”¨éƒ¨ç½²éœ€è¦æŒ‰ node ç»´åº¦æ‰“æ•£ï¼Œé¿å…å †å ï¼ˆæé«˜å®¹ç¾èƒ½åŠ›ï¼‰</li><li>åº”ç”¨éƒ¨ç½²éœ€è¦æŒ‰ AZï¼ˆavailable zoneï¼‰ç»´åº¦æ‰“æ•£ï¼ˆæé«˜å®¹ç¾èƒ½åŠ›ï¼‰</li></ul><p>è¿™äº›åŸºæœ¬çš„è¯‰æ±‚ï¼Œé€šè¿‡ Kubernetes åŸç”Ÿæä¾›çš„ pod affinityã€<a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/" target="_blank" rel="noopener noreferrer">topology spread constraints</a> ç­‰èƒ½åŠ›ç›®å‰éƒ½èƒ½å¤Ÿæ»¡è¶³äº†ã€‚ä½†åœ¨å®é™…çš„ç”Ÿäº§åœºæ™¯ä¸‹ï¼Œè¿˜æœ‰ç€å¤ªå¤šæ›´åŠ å¤æ‚çš„åˆ†åŒºä¸å¼¹æ€§éœ€æ±‚ï¼Œä»¥ä¸‹ä¸¾ä¸€äº›å®é™…çš„ä¾‹å­ï¼š</p><ul><li>æŒ‰ zone æ‰“æ•£æ—¶ï¼Œéœ€è¦æŒ‡å®šåœ¨ä¸åŒ zone ä¸­éƒ¨ç½²çš„æ¯”ä¾‹æ•°ï¼Œæ¯”å¦‚æŸä¸ªåº”ç”¨åœ¨ zone aã€bã€c ä¸­éƒ¨ç½²çš„ Pod æ•°é‡æ¯”ä¾‹ä¸º 1 : 1 : 2 ç­‰ï¼ˆç”±äºä¸€äº›ç°å®çš„åŸå› æ¯”å¦‚è¯¥åº”ç”¨åœ¨å¤šä¸ª zone ä¸­çš„æµé‡ä¸å‡è¡¡ç­‰ï¼‰</li><li>å­˜åœ¨å¤šä¸ª zone æˆ–ä¸åŒæœºå‹çš„æ‹“æ‰‘ï¼Œåº”ç”¨æ‰©å®¹æ—¶ï¼Œä¼˜å…ˆéƒ¨ç½²åˆ°æŸä¸ª zone æˆ–æœºå‹ä¸Šï¼Œå½“èµ„æºä¸è¶³æ—¶å†éƒ¨ç½²åˆ°å¦ä¸€ä¸ª zone æˆ–æœºå‹ä¸Šï¼ˆå¾€åä»¥æ­¤ç±»æ¨ï¼‰ï¼›åº”ç”¨ç¼©å®¹æ—¶ï¼Œè¦æŒ‰åå‘é¡ºåºï¼Œä¼˜å…ˆç¼©å®¹åé¢ zone æˆ–æœºå‹ä¸Šçš„ Podï¼ˆå¾€å‰ä»¥æ­¤ç±»æ¨ï¼‰</li><li>å­˜åœ¨å¤šä¸ªåŸºç¡€çš„èŠ‚ç‚¹æ± å’Œå¼¹æ€§çš„èŠ‚ç‚¹æ± ï¼Œåº”ç”¨éƒ¨ç½²æ—¶éœ€è¦å›ºå®šæ•°é‡æˆ–æ¯”ä¾‹çš„ Pod éƒ¨ç½²åœ¨åŸºç¡€èŠ‚ç‚¹æ± ï¼Œå…¶ä½™çš„éƒ½æ‰©åˆ°å¼¹æ€§èŠ‚ç‚¹æ± </li></ul><p>å¯¹äºè¿™äº›ä¾‹å­ï¼Œè¿‡å»ä¸€èˆ¬åªèƒ½å°†ä¸€ä¸ªåº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ª Workloadï¼ˆæ¯”å¦‚ Deploymentï¼‰æ¥éƒ¨ç½²ï¼Œæ‰èƒ½è§£å†³åº”ç”¨åœ¨ä¸åŒæ‹“æ‰‘ä¸‹é‡‡ç”¨ä¸åŒæ¯”ä¾‹æ•°é‡ã€æ‰©ç¼©å®¹ä¼˜å…ˆçº§ã€èµ„æºæ„ŸçŸ¥ã€å¼¹æ€§é€‰æ‹©ç­‰åœºæ™¯çš„åŸºæœ¬é—®é¢˜ï¼Œä½†è¿˜æ˜¯éœ€è¦ PaaS å±‚æ·±åº¦å®šåˆ¶åŒ–ï¼Œæ¥æ”¯æŒå¯¹ä¸€ä¸ªåº”ç”¨å¤šä¸ª Workload çš„ç²¾ç»†åŒ–ç®¡ç†ã€‚</p><p>é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œåœ¨ Kruise v0.10.0 ç‰ˆæœ¬ä¸­æ–°å¢äº† WorkloadSpread èµ„æºï¼Œç›®å‰å®ƒæ”¯æŒé…åˆ Deploymentã€ReplicaSetã€CloneSet è¿™äº› Workload ç±»å‹ï¼Œæ¥ç®¡ç†å®ƒä»¬ä¸‹å± Pod çš„åˆ†åŒºä¸å¼¹æ€§æ‹“æ‰‘ã€‚
ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ä¾‹å­ï¼š</p><div class="codeBlockContainer_K1bP language-yaml"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> WorkloadSpread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> workloadspread</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">targetRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1 </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> CloneSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> workload</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">subsets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> subset</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requiredNodeSelectorTerm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology.kubernetes.io/zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> zone</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxReplicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10 </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 30%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> subset</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requiredNodeSelectorTerm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">matchExpressions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> topology.kubernetes.io/zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> In</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">values</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> zone</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åˆ›å»ºè¿™ä¸ª WorkloadSpread å¯ä»¥é€šè¿‡ targetRef å…³è”åˆ°ä¸€ä¸ª Workload å¯¹è±¡ä¸Šï¼Œç„¶åè¿™ä¸ª Workload åœ¨æ‰©å®¹ pod çš„è¿‡ç¨‹ä¸­ï¼ŒPod ä¼šè¢« Kruise æŒ‰ä¸Šè¿°ç­–ç•¥æ³¨å…¥å¯¹åº”çš„æ‹“æ‰‘è§„åˆ™ã€‚è¿™æ˜¯ä¸€ç§æ—è·¯çš„æ³¨å…¥å’Œç®¡ç†æ–¹å¼ï¼Œæœ¬èº«ä¸ä¼šå¹²æ¶‰ Workload å¯¹ Pod çš„æ‰©ç¼©å®¹ã€å‘å¸ƒç®¡ç†ã€‚</p><p>æ³¨æ„ï¼šWorkloadSpread å¯¹ Pod çš„ç¼©å®¹çš„ä¼˜å…ˆçº§æ§åˆ¶æ˜¯é€šè¿‡ <a href="https://kubernetes.io/docs/reference/labels-annotations-taints/#pod-deletion-cost" target="_blank" rel="noopener noreferrer">Pod Deletion Cost</a> æ¥å®ç°çš„ï¼š</p><ul><li>å¦‚æœ Workload ç±»å‹æ˜¯ CloneSetï¼Œåˆ™å·²ç»æ”¯æŒäº†è¿™ä¸ª featureï¼Œå¯ä»¥å®ç°ç¼©å®¹ä¼˜å…ˆçº§</li><li>å¦‚æœ Workload ç±»å‹æ˜¯ Deployment/ReplicaSetï¼Œåˆ™è¦æ±‚ Kubernetes version &gt;= 1.21ï¼Œä¸”åœ¨ 1.21 ä¸­è¦åœ¨ kube-controller-manager ä¸Šå¼€å¯ <code>PodDeletionCost</code> è¿™ä¸ª feature-gate</li></ul><p>ä½¿ç”¨ WorkloadSpread åŠŸèƒ½ï¼Œéœ€è¦åœ¨ å®‰è£…/å‡çº§ Kruise v0.10.0 çš„æ—¶å€™æ‰“å¼€ WorkloadSpread è¿™ä¸ª feature-gateã€‚</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="podunavailablebudgetåº”ç”¨å¯ç”¨æ€§é˜²æŠ¤">PodUnavailableBudgetï¼šåº”ç”¨å¯ç”¨æ€§é˜²æŠ¤<a aria-hidden="true" class="hash-link" href="#podunavailablebudgetåº”ç”¨å¯ç”¨æ€§é˜²æŠ¤" title="Direct link to heading">â€‹</a></h2><p>åœ¨è¯¸å¤š <a href="https://kubernetes.io/docs/concepts/workloads/pods/disruptions/" target="_blank" rel="noopener noreferrer">Voluntary Disruption</a> åœºæ™¯ä¸­ Kubernetes åŸç”Ÿæä¾›çš„ <a href="https://kubernetes.io/docs/tasks/run-application/configure-pdb/" target="_blank" rel="noopener noreferrer">Pod Disruption Budgetï¼ˆPDBï¼‰</a> é€šè¿‡é™åˆ¶åŒæ—¶ä¸­æ–­çš„ Pod æ•°é‡ï¼Œæ¥ä¿è¯åº”ç”¨çš„é«˜å¯ç”¨æ€§ã€‚</p><p>ä½†è¿˜æœ‰å¾ˆå¤šåœºæ™¯ä¸­ï¼Œå³ä¾¿æœ‰ PDB é˜²æŠ¤ä¾ç„¶å°†ä¼šå¯¼è‡´ä¸šåŠ¡ä¸­æ–­ã€æœåŠ¡é™çº§ï¼Œæ¯”å¦‚ï¼š</p><ul><li>åº”ç”¨ owner é€šè¿‡ Deployment æ­£åœ¨è¿›è¡Œç‰ˆæœ¬å‡çº§ï¼Œä¸æ­¤åŒæ—¶é›†ç¾¤ç®¡ç†å‘˜ç”±äºæœºå™¨èµ„æºåˆ©ç”¨ç‡è¿‡ä½æ­£åœ¨è¿›è¡Œ node ç¼©å®¹</li><li>ä¸­é—´ä»¶å›¢é˜Ÿåˆ©ç”¨ SidecarSet æ­£åœ¨åŸåœ°å‡çº§é›†ç¾¤ä¸­çš„sidecarç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼šServiceMesh envoyï¼‰ï¼ŒåŒæ—¶HPAæ­£åœ¨å¯¹åŒä¸€æ‰¹åº”ç”¨è¿›è¡Œç¼©å®¹</li><li>åº”ç”¨ owner å’Œä¸­é—´ä»¶å›¢é˜Ÿåˆ©ç”¨ CloneSetã€SidecarSet åŸåœ°å‡çº§çš„èƒ½åŠ›ï¼Œæ­£åœ¨å¯¹åŒä¸€æ‰¹ Pod è¿›è¡Œå‡çº§</li></ul><p>è¿™å…¶å®å¾ˆå¥½ç†è§£ -- PDB åªèƒ½é˜²æ§é€šè¿‡ Eviction API æ¥è§¦å‘çš„ Pod é©±é€ï¼ˆä¾‹å¦‚ kubectl drainé©±é€nodeä¸Šé¢çš„æ‰€æœ‰Podï¼‰ï¼Œä½†æ˜¯å¯¹äº Pod åˆ é™¤ã€åŸåœ°å‡çº§ ç­‰å¾ˆå¤šæ“ä½œæ˜¯æ— æ³•é˜²æŠ¤çš„ã€‚</p><p>åœ¨ Kruise v0.10.0 ç‰ˆæœ¬ä¸­æ–°å¢çš„ PodUnavailableBudgetï¼ˆPUBï¼‰åŠŸèƒ½ï¼Œåˆ™æ˜¯å¯¹åŸç”Ÿ PDB çš„å¼ºåŒ–æ‰©å±•ã€‚å®ƒåŒ…å«äº† PDB è‡ªèº«çš„èƒ½åŠ›ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†å¯¹æ›´å¤š Voluntary Disruption æ“ä½œçš„é˜²æŠ¤ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº Pod åˆ é™¤ã€åŸåœ°å‡çº§ ç­‰ã€‚</p><div class="codeBlockContainer_K1bP language-yaml"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodUnavailableBudget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">targetRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1 </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> apps.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> CloneSet </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> StatefulSet </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># selector ä¸ targetRef äºŒé€‰ä¸€é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># selector:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   matchLabels:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#     app: web-server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¿è¯çš„æœ€å¤§ä¸å¯ç”¨æ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">maxUnavailable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 60%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä¿è¯çš„æœ€å°å¯ç”¨æ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># minAvailable: 40%</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä½¿ç”¨ PodUnavailableBudget åŠŸèƒ½ï¼Œéœ€è¦åœ¨ å®‰è£…/å‡çº§ Kruise v0.10.0 çš„æ—¶å€™æ‰“å¼€feature-gateï¼ˆä¸¤ä¸ªå¯ä»¥é€‰æ‹©æ‰“å¼€ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥éƒ½æ‰“å¼€ï¼‰ï¼š</p><ul><li>PodUnavailableBudgetDeleteGateï¼šæ‹¦æˆªé˜²æŠ¤ Pod åˆ é™¤ã€é©±é€ ç­‰æ“ä½œ</li><li>PodUnavailableBudgetUpdateGateï¼šæ‹¦æˆªé˜²æŠ¤ Pod åŸåœ°å‡çº§ ç­‰æ›´æ–°æ“ä½œ</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="cloneset-æ”¯æŒæŒ‰æ‹“æ‰‘è§„åˆ™ç¼©å®¹">CloneSet æ”¯æŒæŒ‰æ‹“æ‰‘è§„åˆ™ç¼©å®¹<a aria-hidden="true" class="hash-link" href="#cloneset-æ”¯æŒæŒ‰æ‹“æ‰‘è§„åˆ™ç¼©å®¹" title="Direct link to heading">â€‹</a></h2><p>åœ¨ CloneSet ç¼©å®¹ï¼ˆè°ƒå° replicas æ•°é‡ï¼‰çš„æ—¶å€™ï¼Œé€‰æ‹©å“ªäº› Pod åˆ é™¤æ˜¯æœ‰ä¸€å¥—å›ºå®šç®—æ³•æ’åºçš„ï¼š</p><ol><li>æœªè°ƒåº¦ &lt; å·²è°ƒåº¦</li><li>PodPending &lt; PodUnknown &lt; PodRunning</li><li>Not ready &lt; ready</li><li><strong>è¾ƒå° pod-deletion cost &lt; è¾ƒå¤§ pod-deletion cost</strong></li><li><strong>è¾ƒå¤§æ‰“æ•£æƒé‡ &lt; è¾ƒå°</strong></li><li>å¤„äº Ready æ—¶é—´è¾ƒçŸ­ &lt; è¾ƒé•¿</li><li>å®¹å™¨é‡å¯æ¬¡æ•°è¾ƒå¤š &lt; è¾ƒå°‘</li><li>åˆ›å»ºæ—¶é—´è¾ƒçŸ­ &lt; è¾ƒé•¿</li></ol><p>å…¶ä¸­ï¼Œâ€œ4â€ æ˜¯åœ¨ Kruise v0.9.0 ä¸­å¼€å§‹æä¾›çš„ç‰¹æ€§ï¼Œç”¨äºæ”¯æŒç”¨æˆ·æŒ‡å®šåˆ é™¤é¡ºåºï¼ˆWorkloadSpread å°±æ˜¯åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½å®ç°ç¼©å®¹ä¼˜å…ˆçº§ï¼‰ï¼›<strong>è€Œ â€œ5â€ åˆ™æ˜¯å½“å‰ v0.10.0 æä¾›çš„ç‰¹æ€§ï¼Œå³åœ¨ç¼©å®¹çš„æ—¶å€™ä¼šå‚è€ƒåº”ç”¨çš„æ‹“æ‰‘æ‰“æ•£æ¥æ’åº</strong>ã€‚</p><ul><li>å¦‚æœåº”ç”¨é…ç½®äº† <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/" target="_blank" rel="noopener noreferrer">topology spread constraints</a>ï¼Œåˆ™ CloneSet ç¼©å®¹æ—¶ä¼šæŒ‰ç…§å…¶ä¸­çš„ topology ç»´åº¦æ‰“æ•£æ¥é€‰æ‹© Pod åˆ é™¤ï¼ˆæ¯”å¦‚å°½é‡æ‰“å¹³å¤šä¸ª zone ä¸Šéƒ¨ç½² Pod çš„æ•°é‡ï¼‰</li><li>å¦‚æœåº”ç”¨æ²¡æœ‰é…ç½® <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/" target="_blank" rel="noopener noreferrer">topology spread constraints</a>ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹ CloneSet ç¼©å®¹æ—¶ä¼šæŒ‰ç…§ node èŠ‚ç‚¹ç»´åº¦æ‰“æ•£æ¥é€‰æ‹© Pod åˆ é™¤ï¼ˆå°½é‡å‡å°‘åŒ node ä¸Šçš„å †å æ•°é‡ï¼‰</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="advanced-statefulset-æ”¯æŒæµå¼æ‰©å®¹">Advanced StatefulSet æ”¯æŒæµå¼æ‰©å®¹<a aria-hidden="true" class="hash-link" href="#advanced-statefulset-æ”¯æŒæµå¼æ‰©å®¹" title="Direct link to heading">â€‹</a></h2><p>ä¸ºäº†é¿å…åœ¨ä¸€ä¸ªæ–° Advanced StatefulSet åˆ›å»ºåæœ‰å¤§é‡å¤±è´¥çš„ pod è¢«åˆ›å»ºå‡ºæ¥ï¼Œä» Kruise v0.10.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†åœ¨ scale strategy ä¸­çš„ maxUnavailable ç­–ç•¥ï¼š</p><div class="codeBlockContainer_K1bP language-yaml"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps.kruise.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> StatefulSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">scaleStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">maxUnavailable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10% </span><span class="token comment" style="color:#999988;font-style:italic"># percentage or absolute number</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å½“è¿™ä¸ªå­—æ®µè¢«è®¾ç½®ä¹‹åï¼ŒAdvanced StatefulSet ä¼šä¿è¯åˆ›å»º pod ä¹‹åä¸å¯ç”¨ pod æ•°é‡ä¸è¶…è¿‡è¿™ä¸ªé™åˆ¶å€¼ã€‚
æ¯”å¦‚è¯´ï¼Œä¸Šé¢è¿™ä¸ª StatefulSet ä¸€å¼€å§‹åªä¼šä¸€æ¬¡æ€§åˆ›å»º 10 ä¸ª podã€‚åœ¨æ­¤ä¹‹åï¼Œæ¯å½“ä¸€ä¸ª pod å˜ä¸º runningã€ready çŠ¶æ€åï¼Œæ‰ä¼šå†åˆ›å»ºä¸€ä¸ªæ–° pod å‡ºæ¥ã€‚</p><p>æ³¨æ„ï¼šè¿™ä¸ªåŠŸèƒ½åªå…è®¸åœ¨ podManagementPolicy æ˜¯ <code>Parallel</code> çš„ StatefulSet ä¸­ä½¿ç”¨ã€‚</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="more">More<a aria-hidden="true" class="hash-link" href="#more" title="Direct link to heading">â€‹</a></h2><p>æ›´å¤šç‰ˆæœ¬å˜åŒ–ï¼Œè¯·å‚è€ƒ <a href="https://github.com/openkruise/kruise/releases" target="_blank" rel="noopener noreferrer">release page</a> æˆ– <a href="https://github.com/openkruise/kruise/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">ChangeLog</a></p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/zh/blog/tags/release">release</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/openkruise/openkruise.io/tree/master/blog/blog/2021-09-06-release-0.10.0.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æœ¬é¡µ</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/blog/workloadspread"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->OpenKruise v0.10.0 æ–°ç‰¹æ€§WorkloadSpreadè§£è¯»</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/blog/sidecarset-hotupdate"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">OpenKruise 0.9.0, SidecarSet Helps Mesh Container Hot Upgrade<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workloadspreadæ—è·¯çš„åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†èƒ½åŠ›" class="table-of-contents__link toc-highlight">WorkloadSpreadï¼šæ—è·¯çš„åº”ç”¨å¼¹æ€§æ‹“æ‰‘ç®¡ç†èƒ½åŠ›</a></li><li><a href="#podunavailablebudgetåº”ç”¨å¯ç”¨æ€§é˜²æŠ¤" class="table-of-contents__link toc-highlight">PodUnavailableBudgetï¼šåº”ç”¨å¯ç”¨æ€§é˜²æŠ¤</a></li><li><a href="#cloneset-æ”¯æŒæŒ‰æ‹“æ‰‘è§„åˆ™ç¼©å®¹" class="table-of-contents__link toc-highlight">CloneSet æ”¯æŒæŒ‰æ‹“æ‰‘è§„åˆ™ç¼©å®¹</a></li><li><a href="#advanced-statefulset-æ”¯æŒæµå¼æ‰©å®¹" class="table-of-contents__link toc-highlight">Advanced StatefulSet æ”¯æŒæµå¼æ‰©å®¹</a></li><li><a href="#more" class="table-of-contents__link toc-highlight">More</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/installation">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://kubernetes.slack.com/channels/openkruise" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Kubernetes Slack ( #openkruise channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog/">DingTalk (GroupID: 23330762 )</a></li><li class="footer__item"><a class="footer__link-item" href="/zh/blog/">WeChat (User: openkruise )</a></li><li class="footer__item"><a href="https://shimo.im/docs/gXqmeQOYBehZ4vqo" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/openkruise/community/blob/master/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Community Membership<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>Â© 2022 The OpenKruise Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
<script src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/runtime~main.14fdc4d9.js"></script>
<script src="https://cdn.jsdelivr.net/gh/openkruise/openkruise.io@gh-pages/zh/assets/js/main.8507f4ee.js"></script>
</body>
</html>