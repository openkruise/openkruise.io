<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-kruisegame docs-version-current docs-doc-page docs-doc-id-user-manuals/network" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Network | OpenKruise</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openkruise.io/kruisegame/user-manuals/network"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-kruisegame-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-kruisegame-current"><meta data-rh="true" property="og:title" content="Network | OpenKruise"><meta data-rh="true" name="description" content="Feature overview"><meta data-rh="true" property="og:description" content="Feature overview"><link data-rh="true" rel="icon" href="/img/openkruise.ico"><link data-rh="true" rel="canonical" href="https://openkruise.io/kruisegame/user-manuals/network"><link data-rh="true" rel="alternate" href="https://openkruise.io/kruisegame/user-manuals/network" hreflang="en"><link data-rh="true" rel="alternate" href="https://openkruise.io/zh/kruisegame/user-manuals/network" hreflang="zh"><link data-rh="true" rel="alternate" href="https://openkruise.io/kruisegame/user-manuals/network" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FKASWWQYOP-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OpenKruise RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OpenKruise Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="OpenKruise" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.3c6f9254.css">
<script src="/assets/js/runtime~main.7f78fe47.js" defer="defer"></script>
<script src="/assets/js/main.8f94498d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/openkruise.ico"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">‚≠êÔ∏è If you like OpenKruise, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/openkruise/kruise">GitHub</a>! ‚≠êÔ∏è</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/openkruise.ico" alt="OpenKruise" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/openkruise.ico" alt="OpenKruise" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenKruise</b></a><a class="navbar__item navbar__link" href="/docs/">Kruise</a><a class="navbar__item navbar__link" href="/rollouts/introduction">Rollouts</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kruisegame/introduction">Kruise-Game</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/">v1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">v1.8 üöß</a></li><li><a class="dropdown__link" href="/docs/">v1.7</a></li><li><a class="dropdown__link" href="/docs/v1.6/">v1.6</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/kruisegame/user-manuals/network" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/kruisegame/user-manuals/network" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/kruisegame/introduction">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/design-concept">Design Concept</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/kruisegame/user-manuals/deploy-gameservers">User Manuals</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/deploy-gameservers">Deploy Gameservers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/hot-update">Hot Update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/update-strategy">Update Strategy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/gameservers-scale">Gameservers Scale</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/container-startup-sequence-control">Startup Sequence Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/service-qualities">Service Qualities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kruisegame/user-manuals/network">Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/lifecycle">Custom Lifecycle Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/gameserver-monitor">GameServer Monitor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/game-matchmaking">Game MatchMaking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/game-dashboard">OKG Dashboard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/crd-field-description">CRD Field Description</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/user-manuals/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/kruisegame/best-practices/session-based-game">Best Practices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/best-practices/session-based-game">Best Practice for Session-Based Games(PvP room)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/best-practices/pve-game">Best Practices for Traditional PvE Games</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/best-practices/shared-mem">Best Practice for Shard-Memory of GameServers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/best-practices/gameserver-delivery-management">Best Practices for Agile Delivery and Operations Management of GameServers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/best-practices/workflow">Best Practices for Game O&amp;M Workflow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/kruisegame/developer-manuals/contribution">Developer Manuals</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/developer-manuals/contribution">contribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/developer-manuals/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/developer-manuals/go-client">Golang Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/developer-manuals/kruise-game-api">Kruise Game API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/kruisegame/blog-video/kubecon-shangyou-20230926">Blog &amp; Video</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/kubecon-shangyou-20230926">ShangYou&#x27;s Cloud-Native Practice of GameServers based on OpenKruiseGame</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/kubecon-chillyroom-20240823">The Experience of ChillyRoom Developing &amp; Managing Session-Based Game</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/meetup-guangzhou-20231125">OpenKruiseGame Supports Game Ops &amp; Management to Improve Efficiency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/lilith-okg">Lilith Games&#x27; Path to Cloud Native</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/guanying-20231129">Upgrading Game Cloud-Native Architecture with OpenKrusieGame</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/higress">Best Practice for Gaming Gateway of Higress √ó OpenKruiseGame</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/cloud-forward-okg">Cloud Forward | Cloud Native Game Solution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/ack-one-okg">Best Practices for Consistent Delivery of Global Game Services in Multiple Regions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/okg-911">911 Technology&#x27;s &quot;Detective Conan&quot; game cloud native architecture implementation practice</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/okg-gsshosting">GssHosting game hosting platform realizes efficient management in multiple regions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kruisegame/blog-video/okg-360">Landing of 360 Game Containerization</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">User Manuals</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Network</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Network</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="feature-overview">Feature overview<a href="#feature-overview" class="hash-link" aria-label="Direct link to Feature overview" title="Direct link to Feature overview">‚Äã</a></h2>
<p>As mentioned in <a href="/kruisegame/design-concept">Design concept of OpenKruiseGame</a>, the access network of game servers is the main concern of game developers.
For a non-gateway architecture, game developers need to consider how to expose external IP addresses and ports of game servers for access by players.
Different network products are usually required for access in different scenarios, and the network products may be provided by different cloud service providers. This increases the complexity of the access network. Cloud Provider &amp; Network Plugin of OpenKruiseGame is designed to resolve this issue.
OpenKruiseGame integrates different network plugins of different cloud service providers. You can use GameServerSet to set network parameters for game servers. Moreover, you can view network status information in the generated GameServer. This significantly reduces the complexity of the access network of game servers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-plugins">Network plugins<a href="#network-plugins" class="hash-link" aria-label="Direct link to Network plugins" title="Direct link to Network plugins">‚Äã</a></h2>
<p>OpenKruiseGame supports the following network plugins:</p>
<ul>
<li>Kubernetes-HostPort</li>
<li>Kubernetes-NodePort</li>
<li>Kubernetes-Ingress</li>
<li>AlibabaCloud-NATGW</li>
<li>AlibabaCloud-SLB</li>
<li>AlibabaCloud-NLB</li>
<li>AlibabaCloud-EIP</li>
<li>AlibabaCloud-SLB-SharedPort</li>
<li>AlibabaCloud-NLB-SharedPort</li>
<li>AlibabaCloud-Multi-NLBs</li>
<li>Volcengine-CLB</li>
<li>AmazonWebServices-NLB</li>
<li>TencentCloud-CLB</li>
<li>JdCloud-NLB</li>
<li>JdCloud-EIP</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-hostport">Kubernetes-HostPort<a href="#kubernetes-hostport" class="hash-link" aria-label="Direct link to Kubernetes-HostPort" title="Direct link to Kubernetes-HostPort">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name">Plugin name<a href="#plugin-name" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>Kubernetes-HostPort</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider">Cloud Provider<a href="#cloud-provider" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>Kubernetes</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description">Plugin description<a href="#plugin-description" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>HostPort enables game servers to be accessed from the Internet by forwarding Internet traffic to the game servers by using the external IP address and ports exposed by the host where the game servers are located. The exposed IP address of the host must be a public IP address so that the host can be accessed from the Internet.</p>
</li>
<li>
<p>In the configuration file, you can specify a custom range of available host ports. The default port range is 8000 to 9000. This network plugin can help you allocate and manage host ports to prevent port conflicts.</p>
</li>
<li>
<p>This network plugin does not support network isolation.</p>
</li>
<li>
<p>Kubernetes-HostPort relies on the hostPort pattern provided by Kubernetes. Note that some CNI plugins exist that do not support hostPort, such as Terway.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters">Network parameters<a href="#network-parameters" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>ContainerPorts</p>
<ul>
<li>Meaning: the name of the container that provides services, the ports to be exposed, and the protocols.</li>
<li>Value: in the format of containerName<!-- -->:port1<!-- -->/protocol1,port2/protocol2,... The protocol names must be in uppercase letters. Example: <code>game-server:25565/TCP</code>.</li>
<li>Configuration change supported or not: no. The value of this parameter is effective until the pod lifecycle ends.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration">Plugin configuration<a href="#plugin-configuration" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[kubernetes.hostPort]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the range of available ports of the host. Ports in this range can be used to forward Internet traffic to pods.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 9000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 8000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<p>OpenKruiseGame allows game servers to use the HostPort network in native Kubernetes clusters. The host where game servers are located exposes its external IP address and ports by using which Internet traffic is forwarded to the internal ports of the game servers. The following example shows the details:</p>
<p>Deploy the GameServerSet object that contains the network field.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: gs-hostport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updateStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      podUpdatePolicy: InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: Kubernetes-HostPort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkConf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The network configuration is specified in the form of a key-value pair. The network configuration is determined by the network plugin. Different network plugins correspond to different network configurations.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: ContainerPorts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # The value of ContainerPorts is in the following format: `{containerName}:{port1}/{protocol1},{port2}/{protocol2},...`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: &quot;gameserver:80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gameServerTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: registry.cn-hangzhou.aliyuncs.com/gs-demo/gameserver:network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Use the networkStatus field in the generated GameServer to view the network status information of the game server.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  networkStatus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createTime: </span><span class="token string" style="color:#e3116c">&quot;2022-11-23T10:57:01Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desiredNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    externalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: </span><span class="token number" style="color:#36acaa">48.98</span><span class="token plain">.98.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: gameserver-80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token number" style="color:#36acaa">8211</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.0.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: gameserver-80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastTransitionTime: </span><span class="token string" style="color:#e3116c">&quot;2022-11-23T10:57:01Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: Kubernetes-HostPort</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Clients can access the game server by using 48.98.98.8:8211.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-nodeport">Kubernetes-NodePort<a href="#kubernetes-nodeport" class="hash-link" aria-label="Direct link to Kubernetes-NodePort" title="Direct link to Kubernetes-NodePort">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-1">Plugin name<a href="#plugin-name-1" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>Kubernetes-NodePort</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-1">Cloud Provider<a href="#cloud-provider-1" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>Kubernetes</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-1">Plugin description<a href="#plugin-description-1" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>Kubernetes NodePort leverages the Kubernetes NodePort type of Service to expose game server services externally. The host machine needs to be configured with a public IP and have the capability to be accessed from the internet.</p>
</li>
<li>
<p>This plugin relies on the limitation of the number of NodePorts available. By default, the open ports range from 30000 to 32767. If you wish to open more ports, please modify the APIServer service-node-port-range parameter.</p>
</li>
<li>
<p>This plugin does not support network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-1">Network parameters<a href="#network-parameters-1" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>PortProtocols</p>
<ul>
<li>Meaning: the ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>Value: in the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: whether the ingress object is still retained when the pod is deleted</li>
<li>Value format: true / false</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: the container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>Value: <code>{containerName_0},{containerName_1},...</code> ExampleÔºösidecar</li>
<li>Configuration change supported or not: It cannot be changed during the in-place updating process.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-1">Plugin configuration<a href="#plugin-configuration-1" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>Êó†</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: gs-nodeport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updateStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      podUpdatePolicy: InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: Kubernetes-NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkConf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: &quot;false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gameServerTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: registry.cn-hangzhou.aliyuncs.com/gs-demo/gameserver:network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Use the networkStatus field in the generated GameServer to view the network status information of the game server:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  networkStatus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createTime: </span><span class="token string" style="color:#e3116c">&quot;2024-04-28T12:28:27Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desiredNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    externalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: </span><span class="token number" style="color:#36acaa">120.78</span><span class="token plain">.78.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token number" style="color:#36acaa">31480</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.0.82</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastTransitionTime: </span><span class="token string" style="color:#e3116c">&quot;2024-04-28T12:28:27Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: Kubernetes-NodePort</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Clients can access the game server by using 120.78.78.8:31480</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-ingress">Kubernetes-Ingress<a href="#kubernetes-ingress" class="hash-link" aria-label="Direct link to Kubernetes-Ingress" title="Direct link to Kubernetes-Ingress">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-2">Plugin name<a href="#plugin-name-2" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>Kubernetes-Ingress</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-2">Cloud Provider<a href="#cloud-provider-2" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>Kubernetes</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-2">Plugin description<a href="#plugin-description-2" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>OKG provides the Ingress network model for games such as H5 games that require the application layer network model. This plugin will automatically set the corresponding path for each game server, which is related to the game server ID and is unique for each game server.</p>
</li>
<li>
<p>This network plugin does not support network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-2">Network parameters<a href="#network-parameters-2" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>Path</p>
<ul>
<li>Meaning: Access path. Each game server has its own access path based on its ID.</li>
<li>Value format: Add <code>&lt;id&gt;</code> to any position in the original path(consistent with the Path field in HTTPIngressPath), and the plugin will generate the path corresponding to the game server ID. For example, when setting the path to /game<code>&lt;id&gt;</code>, the path for game server 0 is /game0, the path for game server 1 is /game1, and so on.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>PathType</p>
<ul>
<li>Meaning: Path type. Same as the PathType field in HTTPIngressPath.</li>
<li>Value format: Same as the PathType field in HTTPIngressPath.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Port</p>
<ul>
<li>Meaning: Port value exposed by the game server.</li>
<li>Value format: port number</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>IngressClassName</p>
<ul>
<li>Meaning: Specify the name of the IngressClass. Same as the IngressClassName field in IngressSpec.</li>
<li>Value format: Same as the IngressClassName field in IngressSpec.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Host</p>
<ul>
<li>Meaning: Domain name.  Each game server has its own domain based on its ID.</li>
<li>Value format: Add <code>&lt;id&gt;</code> to any position in the domain, and the plugin will generate the domain corresponding to the game server ID. For example, when setting the domain to <code>test.game&lt;id&gt;.cn-hangzhou.ali.com</code>, the domain for game server 0 is test.game0.cn-hangzhou.ali.com, the domain for game server 1 is test.game1.cn-hangzhou.ali.com, and so on.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>TlsHosts</p>
<ul>
<li>Meaning: List of hosts containing TLS certificates. Similar to the Hosts field in IngressTLS.</li>
<li>Value format: host1,host2,... For example, xxx.xx1.com,xxx.xx2.com</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>TlsSecretName</p>
<ul>
<li>Meaning: Same as the SecretName field in IngressTLS.</li>
<li>Value format: Same as the SecretName field in IngressTLS.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Annotation</p>
<ul>
<li>Meaning: as an annotation of the Ingress object</li>
<li>Value format: key: value (note the space after the colon), for example: nginx.ingress.kubernetes.io/rewrite-target: /$2</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: whether the ingress object is still retained when the pod is deleted</li>
<li>Value format: true / false</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p><em>additional explanation</em></p>
<ul>
<li>If you want to fill in multiple annotations, you can define multiple slices named Annotation in the networkConf.</li>
<li>Supports filling in multiple paths. The path, path type, and port correspond one-to-one in the order of filling. When the number of paths is greater than the number of path types(or port), non-corresponding paths will match the path type(or port) that was filled in first.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-2">Plugin configuration<a href="#plugin-configuration-2" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>None</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2">Example<a href="#example-2" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<p>Set GameServerSet.Spec.Network:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> IngressClassName</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /game&lt;id</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">(/</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">$)(.</span><span class="token important">*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">&lt;id</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Host</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test.xxx.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.ali.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PathType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ImplementationSpecific</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TlsHosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx.xx1.com</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">xxx.xx2.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nginx.ingress.kubernetes.io/rewrite-target: /$2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nginx.ingress.kubernetes.io/random: xxx&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Kubernetes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will generate a service and an ingress object for each replica of GameServerSet. The configuration for the ingress of the 0th game server is shown below:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ingressClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test.xxx.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.ali.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ing</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /game0(/</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">$)(.</span><span class="token important">*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ImplementationSpecific</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ing</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ImplementationSpecific</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tls</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hosts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> xxx.xx1.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> xxx.xx2.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">loadBalancer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 47.xx.xxx.xxx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The other GameServers only have different path fields and service names, while the other generated parameters are the same.</p>
<p>The network status of GameServer is as follows:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networkStatus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">createTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-04-28T14:00:30Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">currentNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">desiredNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">externalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 47.xx.xxx.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /game0(/</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">$)(.</span><span class="token important">*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10.xxx.x.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /game0(/</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">$)(.</span><span class="token important">*)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-04-28T14:00:30Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Kubernetes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Ingress</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-natgw">AlibabaCloud-NATGW<a href="#alibabacloud-natgw" class="hash-link" aria-label="Direct link to AlibabaCloud-NATGW" title="Direct link to AlibabaCloud-NATGW">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-3">Plugin name<a href="#plugin-name-3" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-NATGW</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-3">Cloud Provider<a href="#cloud-provider-3" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-3">Plugin description<a href="#plugin-description-3" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>AlibabaCloud-NATGW enables game servers to be accessed from the Internet by using an Internet NAT gateway of Alibaba Cloud. Internet traffic is forwarded to the corresponding game servers based on DNAT rules.</p>
</li>
<li>
<p>This network plugin does not support network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-3">Network parameters<a href="#network-parameters-3" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>Ports</p>
<ul>
<li>Meaning: the ports in the pod to be exposed.</li>
<li>Value: in the format of port1,port2,port3‚Ä¶ Example: 80,8080,8888.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>Protocol</p>
<ul>
<li>Meaning: the network protocol.</li>
<li>Value: an example value can be tcp. The value is tcp by default.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: whether the mapping relationship is fixed. If the mapping relationship is fixed, the mapping relationship remains unchanged even if the pod is deleted and recreated.</li>
<li>Value: false or true.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-3">Plugin configuration<a href="#plugin-configuration-3" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>None</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3">Example<a href="#example-3" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<p>OpenKruiseGame supports the NAT gateway model of Alibaba Cloud. A NAT gateway exposes its external IP addresses and ports by using which Internet traffic is forwarded to pods. The following example shows the details:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">|</span><span class="token string bash punctuation" style="color:#393A34"> kubectl apply </span><span class="token string bash punctuation parameter variable" style="color:#36acaa">-f</span><span class="token string bash punctuation" style="color:#393A34"> -</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: gs-natgw</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  updateStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      podUpdatePolicy: InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    networkType: AlibabaCloud-NATGW</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    networkConf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: Ports</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      # The ports to be exposed. The value is in the following format: {port1},{port2}...</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      value: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: Protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      # The protocol. The value is TCP by default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      value: &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#   - name: Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Specify whether the mapping relationship is fixed. By default, the mapping relationship is not fixed, that is, a new external IP address and port are generated after the pod is deleted.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">#     value: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  gameServerTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - image: registry.cn-hangzhou.aliyuncs.com/gs-demo/gameserver:network</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          name: gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Use the networkStatus field in the generated GameServer to view the network status information of the game server.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  networkStatus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createTime: </span><span class="token string" style="color:#e3116c">&quot;2022-11-23T11:21:34Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desiredNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    externalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: </span><span class="token number" style="color:#36acaa">47.97</span><span class="token plain">.227.137</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token string" style="color:#e3116c">&quot;512&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: </span><span class="token number" style="color:#36acaa">172.16</span><span class="token plain">.0.189</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastTransitionTime: </span><span class="token string" style="color:#e3116c">&quot;2022-11-23T11:21:34Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: AlibabaCloud-NATGW</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Clients can access the game server by using 47.97.227.137:512.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-slb">AlibabaCloud-SLB<a href="#alibabacloud-slb" class="hash-link" aria-label="Direct link to AlibabaCloud-SLB" title="Direct link to AlibabaCloud-SLB">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-4">Plugin name<a href="#plugin-name-4" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-SLB</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-4">Cloud Provider<a href="#cloud-provider-4" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-4">Plugin description<a href="#plugin-description-4" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>AlibabaCloud-SLB enables game servers to be accessed from the Internet by using Layer 4 Classic Load Balancer (CLB) of Alibaba Cloud. CLB is a type of Server Load Balancer (SLB). AlibabaCloud-SLB uses different ports of the same CLB instance to forward Internet traffic to different game servers. The CLB instance only forwards traffic, but does not implement load balancing.</p>
</li>
<li>
<p>This network plugin supports network isolation.</p>
</li>
</ul>
<p>Related design: <a href="https://github.com/openkruise/kruise-game/issues/20" target="_blank" rel="noopener noreferrer">https://github.com/openkruise/kruise-game/issues/20</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-4">Network parameters<a href="#network-parameters-4" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>SlbIds</p>
<ul>
<li>Meaning: the CLB instance ID. You can fill in multiple ids.</li>
<li>Value: in the format of slbId-0,slbId-1,... An example value can be &quot;lb-9zeo7prq1m25ctpfrw1m7,lb-bp1qz7h50yd3w58h2f8je&quot;</li>
<li>Configuration change supported or not: yes. You can add new slbIds at the end. However, it is recommended not to change existing slbId that is in use.</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>Meaning: the ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>Value: in the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: whether the mapping relationship is fixed. If the mapping relationship is fixed, the mapping relationship remains unchanged even if the pod is deleted and recreated.</li>
<li>Value: false or true.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: the container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>Value: <code>{containerName_0},{containerName_1},...</code> ExampleÔºösidecar</li>
<li>Configuration change supported or not: It cannot be changed during the in-place updating process.</li>
</ul>
<p>LBHealthCheckSwitch</p>
<ul>
<li>MeaningÔºöWhether to enable health check</li>
<li>FormatÔºö&quot;on&quot; means on, &quot;off&quot; means off. Default is on</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckFlag</p>
<ul>
<li>Meaning: Whether to enable http type health check</li>
<li>Format: &quot;on&quot; means on, &quot;off&quot; means off. Default is on</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckType</p>
<ul>
<li>Meaning: Health Check Protocol</li>
<li>Format: fill in &quot;tcp&quot; or &quot;http&quot;, the default is tcp</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckConnectTimeout</p>
<ul>
<li>Meaning: Maximum timeout for health check response.</li>
<li>Format: Unit: seconds. The value range is [1, 300]. The default value is &quot;5&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthyThreshold</p>
<ul>
<li>Meaning: After the number of consecutive successful health checks, the health check status of the server will be determined from failure to success.</li>
<li>Format: Value range [2, 10]. Default value is &quot;2&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBUnhealthyThreshold</p>
<ul>
<li>Meaning: After the number of consecutive health check failures, the health check status of the server will be determined from success to failure.</li>
<li>Format: Value range [2, 10]. The default value is &quot;2&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckInterval</p>
<ul>
<li>Meaning: health check interval.</li>
<li>Format: Unit: seconds. The value range is [1, 50]. The default value is &quot;10&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckProtocolPort</p>
<ul>
<li>MeaningÔºöthe protocols &amp; ports of HTTP type health check.</li>
<li>FormatÔºöMultiple values are separated by &#x27;,&#x27;. e.g. https:443,http:80</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckUri</p>
<ul>
<li>Meaning: The corresponding uri when the health check type is HTTP.</li>
<li>Format: The length is 1~80 characters, only letters, numbers, and characters can be used. Must start with a forward slash (/). Such as &quot;/test/index.html&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckDomain</p>
<ul>
<li>Meaning: The corresponding domain name when the health check type is HTTP.</li>
<li>Format: The length of a specific domain name is limited to 1~80 characters. Only lowercase letters, numbers, dashes (-), and half-width periods (.) can be used.</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckMethod</p>
<ul>
<li>Meaning: The corresponding method when the health check type is HTTP.</li>
<li>Format: &quot;GET&quot; or &quot;HEAD&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-4">Plugin configuration<a href="#plugin-configuration-4" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[alibabacloud]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[alibabacloud.slb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the range of available ports of the CLB instance. Ports in this range can be used to forward Internet traffic to pods. In this example, the range includes 200 ports.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 700</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-nlb">AlibabaCloud-NLB<a href="#alibabacloud-nlb" class="hash-link" aria-label="Direct link to AlibabaCloud-NLB" title="Direct link to AlibabaCloud-NLB">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-5">Plugin name<a href="#plugin-name-5" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-NLB</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-5">Cloud Provider<a href="#cloud-provider-5" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-5">Plugin description<a href="#plugin-description-5" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>AlibabaCloud-NLB enables game servers to be accessed from the Internet by using Layer 4 Network Load Balancer (NLB) of Alibaba Cloud. AlibabaCloud-NLB uses different ports of the same NLB instance to forward Internet traffic to different game servers. The NLB instance only forwards traffic, but does not implement load balancing.</p>
</li>
<li>
<p>This network plugin supports network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-5">Network parameters<a href="#network-parameters-5" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>NlbIds</p>
<ul>
<li>Meaning: the NLB instance ID. You can fill in multiple ids.</li>
<li>Value: in the format of nlbId-0,nlbId-1,... An example value can be &quot;nlb-ji8l844c0qzii1x6mc,nlb-26jbknebrjlejt5abu&quot;</li>
<li>Configuration change supported or not: yes. You can add new nlbIds at the end. However, it is recommended not to change existing nlbId that is in use.</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>Meaning: the ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>Value: in the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: whether the mapping relationship is fixed. If the mapping relationship is fixed, the mapping relationship remains unchanged even if the pod is deleted and recreated.</li>
<li>Value: false or true.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: the container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>Value: <code>{containerName_0},{containerName_1},...</code> ExampleÔºösidecar</li>
<li>Configuration change supported or not: It cannot be changed during the in-place updating process.</li>
</ul>
<p>LBHealthCheckFlag</p>
<ul>
<li>Meaning: Whether to enable health check</li>
<li>Format: &quot;on&quot; means on, &quot;off&quot; means off. Default is on</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckType</p>
<ul>
<li>Meaning: Health Check Protocol</li>
<li>Format: fill in &quot;tcp&quot; or &quot;http&quot;, the default is tcp</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckConnectPort</p>
<ul>
<li>Meaning: Server port for health check.</li>
<li>Format: Value range [0, 65535]. Default value is &quot;0&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckConnectTimeout</p>
<ul>
<li>Meaning: Maximum timeout for health check response.</li>
<li>Format: Unit: seconds. The value range is [1, 300]. The default value is &quot;5&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthyThreshold</p>
<ul>
<li>Meaning: After the number of consecutive successful health checks, the health check status of the server will be determined from failure to success.</li>
<li>Format: Value range [2, 10]. Default value is &quot;2&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBUnhealthyThreshold</p>
<ul>
<li>Meaning: After the number of consecutive health check failures, the health check status of the server will be determined from success to failure.</li>
<li>Format: Value range [2, 10]. The default value is &quot;2&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckInterval</p>
<ul>
<li>Meaning: health check interval.</li>
<li>Format: Unit: seconds. The value range is [1, 50]. The default value is &quot;10&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckUri</p>
<ul>
<li>Meaning: The corresponding uri when the health check type is HTTP.</li>
<li>Format: The length is 1~80 characters, only letters, numbers, and characters can be used. Must start with a forward slash (/). Such as &quot;/test/index.html&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckDomain</p>
<ul>
<li>Meaning: The corresponding domain name when the health check type is HTTP.</li>
<li>Format: The length of a specific domain name is limited to 1~80 characters. Only lowercase letters, numbers, dashes (-), and half-width periods (.) can be used.</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckMethod</p>
<ul>
<li>Meaning: The corresponding method when the health check type is HTTP.</li>
<li>Format: &quot;GET&quot; or &quot;HEAD&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-5">Plugin configuration<a href="#plugin-configuration-5" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[alibabacloud]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[alibabacloud.nlb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the range of available ports of the NLB instance. Ports in this range can be used to forward Internet traffic to pods. In this example, the range includes 500 ports.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 1500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-4">Example<a href="#example-4" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: gs-nlb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updateStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      podUpdatePolicy: InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkConf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: NlbIds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: nlb-muyo7fv6z646ygcxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: AlibabaCloud-NLB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gameServerTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: registry.cn-hangzhou.aliyuncs.com/gs-demo/gameserver:network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The network status of GameServer would be as follows:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  networkStatus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createTime: &quot;2024-04-28T12:41:56Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desiredNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    externalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - endPoint: nlb-muyo7fv6z646ygcxxx.cn-xxx.nlb.aliyuncs.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ip: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 1047</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: 172.16.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastTransitionTime: &quot;2024-04-28T12:41:56Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: AlibabaCloud-NLB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Clients can access the game server by using nlb-muyo7fv6z646ygcxxx.cn-xxx.nlb.aliyuncs.com:1047</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-eip">AlibabaCloud-EIP<a href="#alibabacloud-eip" class="hash-link" aria-label="Direct link to AlibabaCloud-EIP" title="Direct link to AlibabaCloud-EIP">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-6">Plugin name<a href="#plugin-name-6" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-EIP</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-6">Cloud Provider<a href="#cloud-provider-6" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-6">Plugin description<a href="#plugin-description-6" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>Allocate a separate EIP for each GameServer</li>
<li>The exposed public access port is consistent with the port monitored in the container, which is managed by security group.</li>
<li>It is necessary to install the latest version of the ack-extend-network-controller component in the ACK cluster. For details, please refer to the <a href="https://cs.console.aliyun.com/#/next/app-catalog/ack/incubator/ack-extend-network-controller" target="_blank" rel="noopener noreferrer">component description page</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-6">Network parameters<a href="#network-parameters-6" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>ReleaseStrategy</p>
<ul>
<li>Meaning: Specifies the EIP release policy.</li>
<li>Value:<!-- -->
<ul>
<li>Follow: follows the lifecycle of the pod that is associated with the EIP. This is the default value.</li>
<li>Never: does not release the EIP. You need to manually release the EIP when you no longer need the EIP. ( By <code>kubectl delete podeip {gameserver name} -n {gameserver namespace}</code>)</li>
<li>You can also specify the timeout period of the EIP. For example, if you set the time period to 5m30s, the EIP is released 5.5 minutes after the pod is deleted. Time expressions written in Go are supported.</li>
</ul>
</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>PoolId</p>
<ul>
<li>Meaning: Specifies the EIP address pool. For more information. It could be nil.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>ResourceGroupId</p>
<ul>
<li>Meaning: Specifies the resource group to which the EIP belongs. It could be nil.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>Bandwidth</p>
<ul>
<li>Meaning: Specifies the maximum bandwidth of the EIP. Unit: Mbit/s. It could be nil. Default is 5.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>BandwidthPackageId</p>
<ul>
<li>Meaning: Specifies the EIP bandwidth plan that you want to use.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>ChargeType</p>
<ul>
<li>Meaning: Specifies the metering method of the EIP.</li>
<li>ValueÔºö<!-- -->
<ul>
<li>PayByTraffic: Fees are charged based on data transfer.</li>
<li>PayByBandwidth: Fees are charged based on bandwidth usage.</li>
</ul>
</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>Description</p>
<ul>
<li>Meaning: The description of EIP resource</li>
<li>Configuration change supported or not: no.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-6">Plugin configuration<a href="#plugin-configuration-6" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>None</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-5">Example<a href="#example-5" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eip</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">podUpdatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AlibabaCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">EIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ReleaseStrategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Never</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Bandwidth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ChargeType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PayByTraffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The network status of GameServer would be as follows:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networkStatus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">createTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-07-17T10:10:18Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">currentNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">desiredNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">externalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 47.98.xxx.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.1.51</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-07-17T10:10:18Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AlibabaCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">EIP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The generated podeip eip-nginx-0 would be as followsÔºö</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alibabacloud.com/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodEIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">k8s.aliyun.com/eip-controller</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ack</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">extend</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-07-17T09:58:12Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">finalizers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> podeip</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller.alibabacloud.com/finalizer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">generation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eip</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;41443319&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 105a9575</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">998e</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4e17</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ab91</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">8f2597eeb55f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allocationID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eip</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allocationType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">releaseStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Never</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Auto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">eipAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 47.98.xxx.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">internetChargeType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PayByTraffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">isp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BGP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networkInterfaceID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eni</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">podLastSeen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2023-07-17T10:36:02Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">privateIPAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.1.51</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceGroupID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rg</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InUse</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In addition, the generated EIP resource will be named after <code>{pod namespace}/{pod name}</code> in the Alibaba Cloud console, which corresponds to each game server one by one.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-slb-sharedport">AlibabaCloud-SLB-SharedPort<a href="#alibabacloud-slb-sharedport" class="hash-link" aria-label="Direct link to AlibabaCloud-SLB-SharedPort" title="Direct link to AlibabaCloud-SLB-SharedPort">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-7">Plugin name<a href="#plugin-name-7" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-SLB-SharedPort</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-7">Cloud Provider<a href="#cloud-provider-7" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-7">Plugin description<a href="#plugin-description-7" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>AlibabaCloud-SLB-SharedPort enables game servers to be accessed from the Internet by using Layer 4 CLB of Alibaba Cloud. Unlike AlibabaCloud-SLB, <code>AlibabaCloud-SLB-SharedPort</code> uses the same port of a CLB instance to forward traffic to game servers, and the CLB instance implements load balancing.
This network plugin applies to stateless network services, such as proxy or gateway, in gaming scenarios.</p>
</li>
<li>
<p>This network plugin supports network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-7">Network parameters<a href="#network-parameters-7" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>SlbIds</p>
<ul>
<li>Meaning: the CLB instance IDs. You can specify multiple CLB instance IDs.</li>
<li>Value: an example value can be lb-9zeo7prq1m25ctpfrw1m7.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>Meaning: the ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>Value: in the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters.</li>
<li>Configuration change supported or not: no. The configuration change can be supported in future.</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: the container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>Value: <code>{containerName_0},{containerName_1},...</code> ExampleÔºösidecar</li>
<li>Configuration change supported or not: It cannot be changed during the in-place updating process.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-nlb-sharedport">AlibabaCloud-NLB-SharedPort<a href="#alibabacloud-nlb-sharedport" class="hash-link" aria-label="Direct link to AlibabaCloud-NLB-SharedPort" title="Direct link to AlibabaCloud-NLB-SharedPort">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-8">Plugin name<a href="#plugin-name-8" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-NLB-SharedPort</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-8">Cloud Provider<a href="#cloud-provider-8" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-8">Plugin description<a href="#plugin-description-8" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>AlibabaCloud-NLB-SharedPort enables game servers to be accessed from the Internet by using Layer 4 NLB of Alibaba Cloud, which is similar to AlibabaCloud-SLB-SharedPort.
This network plugin applies to stateless network services, such as proxy or gateway, in gaming scenarios.</p>
</li>
<li>
<p>This network plugin supports network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-8">Network parameters<a href="#network-parameters-8" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>SlbIds</p>
<ul>
<li>Meaning: the CLB instance IDs. You can specify multiple NLB instance IDs.</li>
<li>Value: an example value can be nlb-9zeo7prq1m25ctpfrw1m7</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>Meaning: the ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>Value: in the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters.</li>
<li>Configuration change supported or not: no.</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: the container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>Value: <code>{containerName_0},{containerName_1},...</code> ExampleÔºösidecar</li>
<li>Configuration change supported or not: It cannot be changed during the in-place updating process.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-7">Plugin configuration<a href="#plugin-configuration-7" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>None</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-6">Example<a href="#example-6" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<p>Deploy a GameServerSet with two containers, one named app-2048 and the other named sidecar.</p>
<p>Specify the network parameter AllowNotReadyContainers as sidecar,
then the entire pod will still provide services when the sidecar is updated in place.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gss</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">2048</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nlb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxUnavailable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">podUpdatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AlibabaCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">NLB</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">SharedPort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NlbIds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nlb</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">26jbknebrjlejt5abu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AllowNotReadyContainers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sidecar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">beijing.aliyuncs.com/acs/2048</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shared</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/www/html/js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">beijing.aliyuncs.com/acs/2048</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sidecar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sidecar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> rsync </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aP /app/js/* /app/scripts/ </span><span class="token important">&amp;&amp;</span><span class="token plain"> while true; do echo 11;sleep 2; done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shared</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /app/scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shared</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">emptyDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After successful deployment, update the sidecar image to v2.0 and observe the corresponding endpoint:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get ep </span><span class="token parameter variable" style="color:#36acaa">-w</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> nlb-26jbknebrjlejt5abu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nlb-26jbknebrjlejt5abu      </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.0.8:80,192.168.0.82:80,192.168.63.228:80    10m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After waiting for the entire update process to end, you can find that there are no changes in the ep, indicating that no extraction has been performed.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-8">Plugin configuration<a href="#plugin-configuration-8" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>None</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud-multi-nlbs">AlibabaCloud-Multi-NLBs<a href="#alibabacloud-multi-nlbs" class="hash-link" aria-label="Direct link to AlibabaCloud-Multi-NLBs" title="Direct link to AlibabaCloud-Multi-NLBs">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-9">Plugin name<a href="#plugin-name-9" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AlibabaCloud-Multi-NLBs</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-9">Cloud Provider<a href="#cloud-provider-9" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>AlibabaCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-9">Plugin description<a href="#plugin-description-9" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<p>In gaming scenarios, there is often a need for multi-line access, that is, access through two or more operators&#x27; bandwidth to enable players to quickly access gaming servers across operators.
In this case, a single gaming server requires multiple access endpoints, each of which is bound to an independent operator&#x27;s public IP.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-9">Network parameters<a href="#network-parameters-9" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>NlbIdNames</p>
<ul>
<li>MeaningÔºöthe NLB instance ID and Name(self-define name). You can fill in multiple ids &amp; names.</li>
<li>ValueÔºöin the format of <code>{nlb-id-0}/{name-0},{nlb-id-1}/{name-1}</code>„ÄÇAn example value can be: &quot;nlb-ji8l844c0qzii1x6mc/DianXin,nlb-26jbknebrjlejt5abu/LianTong&quot;</li>
<li>Configuration change supported or not: yes. You can add new nlbIds at the end. However, it is recommended not to change existing nlbId that is in use.</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>MeaningÔºöthe ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>ValueÔºöin the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters. support protocol types: TCP„ÄÅUDP„ÄÅTCPUDP(means use same port for TCP &amp; UDP at same time)</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: whether the mapping relationship is fixed. If the mapping relationship is fixed, the mapping relationship remains unchanged even if the pod is deleted and recreated.</li>
<li>Value: false or true.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: the container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>Value: <code>{containerName_0},{containerName_1},...</code> ExampleÔºösidecar</li>
<li>Configuration change supported or not: It cannot be changed during the in-place updating process.</li>
</ul>
<p>LBHealthCheckFlag</p>
<ul>
<li>Meaning: Whether to enable health check</li>
<li>Format: &quot;on&quot; means on, &quot;off&quot; means off. Default is on</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckType</p>
<ul>
<li>Meaning: Health Check Protocol</li>
<li>Format: fill in &quot;tcp&quot; or &quot;http&quot;, the default is tcp</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckConnectPort</p>
<ul>
<li>Meaning: Server port for health check.</li>
<li>Format: Value range [0, 65535]. Default value is &quot;0&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckConnectTimeout</p>
<ul>
<li>Meaning: Maximum timeout for health check response.</li>
<li>Format: Unit: seconds. The value range is [1, 300]. The default value is &quot;5&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthyThreshold</p>
<ul>
<li>Meaning: After the number of consecutive successful health checks, the health check status of the server will be determined from failure to success.</li>
<li>Format: Value range [2, 10]. Default value is &quot;2&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBUnhealthyThreshold</p>
<ul>
<li>Meaning: After the number of consecutive health check failures, the health check status of the server will be determined from success to failure.</li>
<li>Format: Value range [2, 10]. The default value is &quot;2&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckInterval</p>
<ul>
<li>Meaning: health check interval.</li>
<li>Format: Unit: seconds. The value range is [1, 50]. The default value is &quot;10&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckUri</p>
<ul>
<li>Meaning: The corresponding uri when the health check type is HTTP.</li>
<li>Format: The length is 1~80 characters, only letters, numbers, and characters can be used. Must start with a forward slash (/). Such as &quot;/test/index.html&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckDomain</p>
<ul>
<li>Meaning: The corresponding domain name when the health check type is HTTP.</li>
<li>Format: The length of a specific domain name is limited to 1~80 characters. Only lowercase letters, numbers, dashes (-), and half-width periods (.) can be used.</li>
<li>Whether to support changes: Yes</li>
</ul>
<p>LBHealthCheckMethod</p>
<ul>
<li>Meaning: The corresponding method when the health check type is HTTP.</li>
<li>Format: &quot;GET&quot; or &quot;HEAD&quot;</li>
<li>Whether to support changes: Yes</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-9">Plugin configuration<a href="#plugin-configuration-9" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<p>use the configuration of nlbÔºådefault is:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[alibabacloud.nlb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 1502</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">block_ports = [1025, 1434, 1068]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-7">Example<a href="#example-7" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<p>Deploy a GameServerSet yamlÔºö</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF | kubectl apply -f -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: multi-nlbs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  replicas: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updateStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      podUpdatePolicy: InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkConf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: NlbIdNames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: nlb-ji8l844c0qzii1x6mc/DianXin,nlb-26jbknebrjlejt5abu/LianTong,nlb-qi8lz598c0qzks1x6p2/YiDong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: &quot;8888/TCPUDP&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: AlibabaCloud-Multi-NLBs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gameServerTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: registry.cn-hangzhou.aliyuncs.com/gs-demo/gameserver:network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The GameServers will be likeÔºö</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  networkStatus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createTime: &quot;2024-10-28T12:41:56Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desiredNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    externalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - endPoint: nlb-xxx0.cn.nlb.aliyuncs.com/DianXin,nlb-xxx1.cn.nlb.aliyuncs.com/LianTong,nlb-xxx2.cn.nlb.aliyuncs.com/YiDong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ip: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;8888-udp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 1047</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: UDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - endPoint: nlb-xxx0.cn.nlb.aliyuncs.com/DianXin,nlb-xxx1.cn.nlb.aliyuncs.com/LianTong,nlb-xxx2.cn.nlb.aliyuncs.com/YiDong</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ip: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;8888-tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 1047</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: 172.16.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;8888-udp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 8888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: UDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;8888-tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 8888</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastTransitionTime: &quot;2024-10-28T12:41:56Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: AlibabaCloud-Multi-NLBs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="volcengine-clb">Volcengine-CLB<a href="#volcengine-clb" class="hash-link" aria-label="Direct link to Volcengine-CLB" title="Direct link to Volcengine-CLB">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-10">Plugin name<a href="#plugin-name-10" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>Volcengine-CLB</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-10">Cloud Provider<a href="#cloud-provider-10" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>Volcengine</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-10">Plugin description<a href="#plugin-description-10" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>
<p>The Volcaengine Kubernetes Engine supports the CLB reuse mechanism in k8s. Different SVCs can use different ports of the same CLB. Therefore, the Volcengine-CLB network plugin will record the port allocation corresponding to each CLB. For the specified network type as Volcengine-CLB, the Volcengine-CLB network plugin will automatically allocate a port and create a service object. Wait for the svc ingress field. After the public network IP is successfully created, the GameServer network is in the Ready state and the process is completed.</p>
</li>
<li>
<p>This network plugin supports network isolation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-10">Network parameters<a href="#network-parameters-10" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>ClbIds</p>
<ul>
<li>MeaningÔºöfill in the id of the clb. You can fill in more than one. You need to create the clb in [Volcano Engine].</li>
<li>ValueÔºöeach clbId is divided by <code>,</code> . For example: <code>clb-9zeo7prq1m25ctpfrw1m7</code>,<code>clb-bp1qz7h50yd3w58h2f8je</code>,...</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>MeaningÔºöthe ports and protocols exposed by the pod, support filling in multiple ports/protocols</li>
<li>ValueÔºö<code>port1/protocol1</code>,<code>port2/protocol2</code>,... The protocol names must be in uppercase letters.</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>AllocateLoadBalancerNodePorts</p>
<ul>
<li>MeaningÔºöWhether the generated service is assigned nodeport, this can be set to false only in clb passthrough mode</li>
<li>ValueÔºöfalse / true</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>Fixed</p>
<ul>
<li>MeaningÔºöwhether the mapping relationship is fixed. If the mapping relationship is fixed, the mapping relationship remains unchanged even if the pod is deleted and recreated.</li>
<li>ValueÔºöfalse / true</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>MeaningÔºöthe container names that are allowed not ready when inplace updating, when traffic will not be cut.</li>
<li>ValueÔºö<code>{containerName_0},{containerName_1},...</code> egÔºösidecar</li>
<li>ConfigurableÔºöIt cannot be changed during the in-place updating process.</li>
</ul>
<p>Annotations</p>
<ul>
<li>MeaningÔºöthe anno added to the service</li>
<li>ValueÔºökey1<!-- -->:value1<!-- -->,key2<!-- -->:value2<!-- -->...</li>
<li>ConfigurableÔºöY</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-10">Plugin configuration<a href="#plugin-configuration-10" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[volcengine]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[volcengine.clb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#Fill in the free port segment that clb can use to allocate external access ports to pods, The maximum port range is 200.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 700</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-8">Example<a href="#example-8" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> kubectl apply </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gss</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">2048</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">clb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">podUpdatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Volcengine</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">CLB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClbIds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in Volcengine Cloud LoadBalancer Id here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> clb</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in the exposed ports and their corresponding protocols here. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#If there are multiple ports, the format is as follows: {port1}/{protocol1},{port2}/{protocol2}...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#If the protocol is not filled in, the default is TCP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AllocateLoadBalancerNodePorts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Whether the generated service is assigned nodeport.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in here whether a fixed IP is required [optional] ; Default is false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Annotations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in the anno related to clb on the service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#The format is as follows: {key1}:{value1},{key2}:{value2}...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;key1:value1,key2:value2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cr</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">helm2</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">beijing.cr.volces.com/kruise/2048</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shared</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/www/html/js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cr</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">helm2</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">beijing.cr.volces.com/kruise/2048</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sidecar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sidecar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> rsync </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aP /app/js/* /app/scripts/ </span><span class="token important">&amp;&amp;</span><span class="token plain"> while true; do echo 11;sleep 2; done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shared</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /app/scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shared</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">emptyDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check the network status in GameServer:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">networkStatus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createTime: &quot;2024-01-19T08:19:49Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    currentNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    desiredNetworkState: Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    externalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: xxx.xxx.xx.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 6611</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internalAddresses:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - ip: 172.16.200.60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: &quot;80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lastTransitionTime: &quot;2024-01-19T08:19:49Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networkType: Volcengine-CLB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazonwebservices-nlb">AmazonWebServices-NLB<a href="#amazonwebservices-nlb" class="hash-link" aria-label="Direct link to AmazonWebServices-NLB" title="Direct link to AmazonWebServices-NLB">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-11">Plugin name<a href="#plugin-name-11" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>AmazonWebServices-NLB</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-11">Plugin description<a href="#plugin-description-11" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<p>For game businesses using OKG in AWS EKS clusters, routing traffic directly to Pod ports via network load balancing is the foundation for achieving high-performance real-time service discovery. Using NLB for dynamic port mapping simplifies the forwarding chain and avoids the performance loss caused by Kubernetes kube-proxy load balancing. These features are particularly crucial for handling replica combat-type game servers. For GameServerSets with the network type specified as AmazonWebServices-NLB, the AmazonWebServices-NLB network plugin will schedule an NLB, automatically allocate ports, create listeners and target groups, and associate the target group with Kubernetes services through the TargetGroupBinding CRD. If the cluster is configured with VPC-CNI, the traffic will be automatically forwarded to the Pod&#x27;s IP address; otherwise, it will be forwarded through ClusterIP. The process is considered successful when the network of the GameServer is in the Ready state.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="preparation">Preparation<a href="#preparation" class="hash-link" aria-label="Direct link to Preparation" title="Direct link to Preparation">‚Äã</a></h4>
<p>Due to the difference in AWS design, to achieve NLB port-to-Pod port mapping, three types of CRD resources need to be created: Listener/TargetGroup/TargetGroupBinding</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-elbv2-controller">Deploy elbv2-controllerÔºö<a href="#deploy-elbv2-controller" class="hash-link" aria-label="Direct link to Deploy elbv2-controllerÔºö" title="Direct link to Deploy elbv2-controllerÔºö">‚Äã</a></h5>
<p>Definition and controller for Listener/TargetGroup CRDs: <a href="https://github.com/aws-controllers-k8s/elbv2-controller" target="_blank" rel="noopener noreferrer">https://github.com/aws-controllers-k8s/elbv2-controller</a>. This project links k8s resources with AWS cloud resources. Download the chart: <a href="https://gallery.ecr.aws/aws-controllers-k8s/elbv2-chart" target="_blank" rel="noopener noreferrer">https://gallery.ecr.aws/aws-controllers-k8s/elbv2-chart</a>, example value.yaml:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">serviceAccount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">eks.amazonaws.com/role-arn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;arn:aws:iam::xxxxxxxxx:role/test&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">aws</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">region</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;us-east-1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">endpoint_url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://elasticloadbalancing.us-east-1.amazonaws.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The key to deploying this project lies in authorizing the k8s ServiceAccount to access the NLB SDK, which is recommended to be done through an IAM role:</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="step-1enable-oidc-provider-for-the-eks-cluster">Step 1ÔºöEnable OIDC provider for the EKS cluster<a href="#step-1enable-oidc-provider-for-the-eks-cluster" class="hash-link" aria-label="Direct link to Step 1ÔºöEnable OIDC provider for the EKS cluster" title="Direct link to Step 1ÔºöEnable OIDC provider for the EKS cluster">‚Äã</a></h6>
<ol>
<li>Sign in to the AWS Management Console.</li>
<li>Navigate to the EKS consoleÔºö<a href="https://console.aws.amazon.com/eks/" target="_blank" rel="noopener noreferrer">https://console.aws.amazon.com/eks/</a></li>
<li>Select your cluster.</li>
<li>On the cluster details page, ensure that the OIDC provider is enabled. Obtain the OIDC provider URL for the EKS cluster. In the &quot;Configuration&quot; section of the cluster details page, find the &quot;OpenID Connect provider URL&quot;.</li>
</ol>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="step-2configure-the-iam-role-trust-policy">Step 2ÔºöConfigure the IAM role trust policy<a href="#step-2configure-the-iam-role-trust-policy" class="hash-link" aria-label="Direct link to Step 2ÔºöConfigure the IAM role trust policy" title="Direct link to Step 2ÔºöConfigure the IAM role trust policy">‚Äã</a></h6>
<ol>
<li>In the IAM console, create a new identity provider and select &quot;OpenID Connect&quot;.</li>
</ol>
<ul>
<li>For the Provider URL, enter the OIDC provider URL of your EKS cluster.</li>
<li>For Audience, enter: <code>sts.amazonaws.com</code></li>
</ul>
<ol start="2">
<li>In the IAM console, create a new IAM role and select &quot;Custom trust policy&quot;.</li>
</ol>
<ul>
<li>Use the following trust policy to allow EKS to use this role:<!-- -->
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2012-10-17&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Statement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Effect&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Allow&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Principal&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;Federated&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;arn:aws:iam::&lt;AWS_ACCOUNT_ID&gt;:oidc-provider/oidc.eks.&lt;REGION&gt;.amazonaws.com/id/&lt;OIDC_ID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sts:AssumeRoleWithWebIdentity&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Condition&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;StringEquals&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;oidc.eks.&lt;REGION&gt;.amazonaws.com/id/&lt;OIDC_ID&gt;:sub&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;system:serviceaccount:&lt;NAMESPACE&gt;:ack-elbv2-controller&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;oidc.eks.&lt;REGION&gt;.amazonaws.com/id/&lt;OIDC_ID&gt;:aud&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sts.amazonaws.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Replace <code>&lt;AWS_ACCOUNT_ID&gt;</code>„ÄÅ<code>&lt;REGION&gt;</code>„ÄÅ<code>&lt;OIDC_ID&gt;</code>„ÄÅ<code>&lt;NAMESPACE&gt;</code> and <code>&lt;SERVICE_ACCOUNT_NAME&gt;</code> with your actual values.</li>
<li>Add the permission <code>ElasticLoadBalancingFullAccess</code></li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-aws-load-balancer-controller">Deploy AWS Load Balancer ControllerÔºö<a href="#deploy-aws-load-balancer-controller" class="hash-link" aria-label="Direct link to Deploy AWS Load Balancer ControllerÔºö" title="Direct link to Deploy AWS Load Balancer ControllerÔºö">‚Äã</a></h5>
<p>CRD and controller for TargetGroupBinding: <a href="https://github.com/kubernetes-sigs/aws-load-balancer-controller/" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes-sigs/aws-load-balancer-controller/</a></p>
<p>Official deployment documentation: <a href="https://docs.aws.amazon.com/eks/latest/userguide/lbc-helm.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/eks/latest/userguide/lbc-helm.html</a>, essentially authorizing k8s ServiceAccount in a way similar to an IAM role.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-11">Network Parameters<a href="#network-parameters-11" class="hash-link" aria-label="Direct link to Network Parameters" title="Direct link to Network Parameters">‚Äã</a></h4>
<p>NlbARNs</p>
<ul>
<li>Meaning: Fill in the ARN of the nlb, you can fill in multiple, and nlb needs to be created in AWS in advance.</li>
<li>Format: Separate each nlbARN with a comma. For example: arn:aws:elasticloadbalancing:us-east-1:888888888888<!-- -->:loadbalancer<!-- -->/net/aaa/3b332e6841f23870,arn:aws:elasticloadbalancing:us-east-1:000000000000<!-- -->:loadbalancer<!-- -->/net/bbb/5fe74944d794d27e</li>
<li>Support for change: Yes</li>
</ul>
<p>NlbVPCId</p>
<ul>
<li>Meaning: Fill in the vpcid where nlb is located, needed for creating AWS target groups.</li>
<li>Format: String. For example: vpc-0bbc9f9f0ffexxxxx</li>
<li>Support for change: Yes</li>
</ul>
<p>NlbHealthCheck</p>
<ul>
<li>Meaning: Fill in the health check parameters for the nlb target group, can be left blank to use default values.</li>
<li>Format: Separate each configuration with a comma. For example: &quot;healthCheckEnabled<!-- -->:true<!-- -->,healthCheckIntervalSeconds:30,healthCheckPath:/health,healthCheckPort:8081,healthCheckProtocol<!-- -->:HTTP<!-- -->,healthCheckTimeoutSeconds:10,healthyThresholdCount:5,unhealthyThresholdCount:2&quot;</li>
<li>Support for change: Yes</li>
<li>Parameter explanationÔºö<!-- -->
<ul>
<li><strong>healthCheckEnabled</strong>ÔºöIndicates whether health checks are enabled. If the target type is lambda, health checks are disabled by default but can be enabled. If the target type is instance, ip, or alb, health checks are always enabled and cannot be disabled.</li>
<li><strong>healthCheckIntervalSeconds</strong>ÔºöThe approximate amount of time, in seconds, between health checks of an individual target. The range is 5-300. If the target group protocol is TCP, TLS, UDP, TCP_UDP, HTTP, or HTTPS, the default is 30 seconds. If the target group protocol is GENEVE, the default is 10 seconds. If the target type is lambda, the default is 35 seconds.</li>
<li><strong>healthCheckPath</strong>ÔºöThe destination for health checks on the targets. For HTTP/HTTPS health checks, this is the path. For GRPC protocol version, this is the path of a custom health check method with the format /package.service/method. The default is /Amazon Web Services.ALB/healthcheck.</li>
<li><strong>healthCheckPort</strong>ÔºöThe port the load balancer uses when performing health checks on targets. The default is traffic-port, which is the port on which each target receives traffic from the load balancer. If the protocol is GENEVE, the default is port 80.</li>
<li><strong>healthCheckProtocol</strong>ÔºöThe protocol the load balancer uses when performing health checks on targets. For Application Load Balancers, the default is HTTP. For Network Load Balancers and Gateway Load Balancers, the default is TCP. The GENEVE, TLS, UDP, and TCP_UDP protocols are not supported for health checks.</li>
<li><strong>healthCheckTimeoutSeconds</strong>ÔºöThe amount of time, in seconds, during which no response from a target means a failed health check. The range is 2‚Äì120 seconds. For target groups with a protocol of HTTP, the default is 6 seconds. For target groups with a protocol of TCP, TLS, or HTTPS, the default is 10 seconds. For target groups with a protocol of GENEVE, the default is 5 seconds. If the target type is lambda, the default is 30 seconds.</li>
<li><strong>healthyThresholdCount</strong>ÔºöThe number of consecutive health check successes required before considering a target healthy. The range is 2-10. If the target group protocol is TCP, TCP_UDP, UDP, TLS, HTTP, or HTTPS, the default is 5. For target groups with a protocol of GENEVE, the default is 5. If the target type is lambda, the default is 5.</li>
<li><strong>unhealthyThresholdCount</strong>ÔºöThe number of consecutive health check failures required before considering a target unhealthy. The range is 2-10. If the target group protocol is TCP, TCP_UDP, UDP, TLS, HTTP, or HTTPS, the default is 2. For target groups with a protocol of GENEVE, the default is 2. If the target type is lambda, the default is 5.</li>
</ul>
</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>Meaning: Ports and protocols exposed by the pod, supports specifying multiple ports/protocols.</li>
<li>Format: port1/protocol1,port2/protocol2,... (protocol should be uppercase)</li>
<li>Support for change: Yes</li>
</ul>
<p>Fixed</p>
<ul>
<li>Meaning: Whether the access port is fixed. If yes, even if the pod is deleted and rebuilt, the mapping between the internal and external networks will not change.</li>
<li>Format: false / true</li>
<li>Support for change: Yes</li>
</ul>
<p>AllowNotReadyContainers</p>
<ul>
<li>Meaning: The corresponding container name that allows continuous traffic during in-place upgrades.</li>
<li>Format: <code>{containerName_0},{containerName_1},...</code> For example: sidecar</li>
<li>Support for change: Not changeable during in-place upgrades</li>
</ul>
<p>Annotations</p>
<ul>
<li>Meaning: Annotations added to the service, supports specifying multiple annotations.</li>
<li>Format: key1<!-- -->:value1<!-- -->,key2<!-- -->:value2<!-- -->...</li>
<li>Support for change: Yes</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-plugin-configuration">#### Plugin configuration<a href="#-plugin-configuration" class="hash-link" aria-label="Direct link to #### Plugin configuration" title="Direct link to #### Plugin configuration">‚Äã</a></h4>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[aws]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[aws.nlb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the range of free ports that NLB can use to allocate external access ports for pods, with a maximum range of 50 (closed interval)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># The limit of 50 comes from AWS&#x27;s limit on the number of listeners, see: https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-limits.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 32050</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 32001</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-9">Example<a href="#example-9" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">|</span><span class="token string bash punctuation" style="color:#393A34"> kubectl apply </span><span class="token string bash punctuation parameter variable" style="color:#36acaa">-f</span><span class="token string bash punctuation" style="color:#393A34"> -</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: gs-demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  updateStrategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      podUpdatePolicy: InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  network:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    networkType: AmazonWebServices-NLB</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    networkConf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: NlbARNs</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      value: &quot;arn:aws:elasticloadbalancing:us-east-1:xxxxxxxxxxxx:loadbalancer/net/okg-test/yyyyyyyyyyyyyyyy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: NlbVPCId</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      value: &quot;vpc-0bbc9f9f0ffexxxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      value: &quot;80/TCP&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - name: NlbHealthCheck</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      value: &quot;healthCheckIntervalSeconds:15&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  gameServerTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - image: registry.cn-hangzhou.aliyuncs.com/gs-demo/gameserver:network</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          name: gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tencentcloud-clb">TencentCloud-CLB<a href="#tencentcloud-clb" class="hash-link" aria-label="Direct link to TencentCloud-CLB" title="Direct link to TencentCloud-CLB">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-12">Plugin name<a href="#plugin-name-12" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>TencentCloud-CLB</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-11">Cloud Provider<a href="#cloud-provider-11" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>TencentCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-12">Plugin description<a href="#plugin-description-12" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<ul>
<li>TencentCloud-CLB enables game servers to be accessed from the Internet by using Cloud Load Balancer (CLB) of Tencent Cloud. CLB is a type of Server Load Balancer (CLB). TencentCloud-CLB uses different ports for different game servers. The CLB instance only forwards traffic, but does not implement load balancing.</li>
<li>The <a href="https://github.com/tkestack/tke-extend-network-controller" target="_blank" rel="noopener noreferrer">tke-extend-network-controller</a> network plugin needs to be installed (can be installed through the TKE application market).</li>
<li>This network plugin supports network isolation.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-12">Network parameters<a href="#network-parameters-12" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>ClbIds</p>
<ul>
<li>Meaning: the CLB instance ID. You can fill in multiple ids.</li>
<li>Value: in the format of slbId-0,slbId-1,... An example value can be &quot;lb-9zeo7prq1m25ctpfrw1m7,lb-bp1qz7h50yd3w58h2f8je&quot;</li>
<li>Configuration change supported or not: yes. You can add new slbIds at the end. However, it is recommended not to change existing slbId that is in use.</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>Meaning: the ports in the pod to be exposed and the protocols. You can specify multiple ports and protocols.</li>
<li>Value: in the format of port1/protocol1,port2/protocol2,... The protocol names must be in uppercase letters.</li>
<li>Configuration change supported or not: yes.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-11">Plugin configuration<a href="#plugin-configuration-11" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[tencentcloud]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[tencentcloud.clb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Specify the range of available ports of the CLB instance. Ports in this range can be used to forward Internet traffic to pods. In this example, the range includes 200 ports.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 1100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-10">Example<a href="#example-10" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> clb</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">podUpdatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TencentCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">CLB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClbIds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lb-3ip9k5kr,lb-4ia8k0yh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80/TCP,7777/UDP&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The network status of GameServer would be as follows:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networkStatus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">createTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-10-28T03:16:20Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">currentNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">desiredNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">externalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 139.155.64.52</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1002</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 139.155.64.52</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7777&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1003</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 172.16.7.106</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 172.16.7.106</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7777&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7777</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-10-28T03:16:20Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TencentCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">CLB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdcloud-nlb">JdCloud-NLB<a href="#jdcloud-nlb" class="hash-link" aria-label="Direct link to JdCloud-NLB" title="Direct link to JdCloud-NLB">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-13">Plugin name<a href="#plugin-name-13" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>JdCloud-NLB</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-12">Cloud Provider<a href="#cloud-provider-12" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>JDCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-13">Plugin description<a href="#plugin-description-13" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<p>JdCloud Container Service supports the reuse of NLB (Network Load Balancer) in Kubernetes. Different services (svcs) can use different ports of the same NLB. As a result, the JdCloud-NLB network plugin will record the port allocation for each NLB. For services that specify the network type as JdCloud-NLB, the JdCloud-NLB network plugin will automatically allocate a port and create a service object. Once it detects that the public IP of the svc has been successfully created, the GameServer&#x27;s network will transition to the Ready state, completing the process.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-13">Network parameters<a href="#network-parameters-13" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>NlbIds</p>
<ul>
<li>MeaningÔºöfill in the id of the clb. You can fill in more than one. You need to create the clb in [JdCloud].</li>
<li>ValueÔºöeach clbId is divided by <code>,</code> . For exampleÔºö<code>netlb-aaa,netlb-bbb,...</code></li>
<li>ConfigurableÔºöY</li>
</ul>
<p>PortProtocols</p>
<ul>
<li>MeaningÔºöthe ports and protocols exposed by the pod, support filling in multiple ports/protocols</li>
<li>ValueÔºö<code>port1/protocol1</code>,<code>port2/protocol2</code>,... The protocol names must be in uppercase letters.</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>Fixed</p>
<ul>
<li>MeaningÔºöwhether the mapping relationship is fixed. If the mapping relationship is fixed, the mapping relationship remains unchanged even if the pod is deleted and recreated.</li>
<li>ValueÔºöfalse / true</li>
<li>ConfigurableÔºöY</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration-12">Plugin configuration<a href="#plugin-configuration-12" class="hash-link" aria-label="Direct link to Plugin configuration" title="Direct link to Plugin configuration">‚Äã</a></h4>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[jdcloud]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enable = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[jdcloud.nlb]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#To allocate external access ports for Pods, you need to define the idle port ranges that the NLB (Network Load Balancer) can use. The maximum range for each port segment is 200 ports.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_port = 700</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">min_port = 500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-11">Example<a href="#example-11" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nlb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">podUpdatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JdCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">NLB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NlbIds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in Jdcloud Cloud LoadBalancer Id here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> netlb</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xxxxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in the exposed ports and their corresponding protocols here. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#If there are multiple ports, the format is as follows: {port1}/{protocol1},{port2}/{protocol2}...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#If the protocol is not filled in, the default is TCP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AllocateLoadBalancerNodePorts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Whether the generated service is assigned nodeport.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in here whether a fixed IP is required [optional] ; Default is false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Annotations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#Fill in the anno related to clb on the service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">#The format is as follows: {key1}:{value1},{key2}:{value2}...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;key1:value1,key2:value2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /data/server/start.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gss</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">north</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1.jcr.service.jdcloud.com/gsshosting/pal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The network status of GameServer would be as follows:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">networkStatus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">createTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-11-04T08:00:20Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">currentNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">desiredNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">externalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx.xxx.xxx.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8211&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">531</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10.0.0.95</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8211&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8211</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UDP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-11-04T08:00:20Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JdCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">NLB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jdcloud-eip">JdCloud-EIP<a href="#jdcloud-eip" class="hash-link" aria-label="Direct link to JdCloud-EIP" title="Direct link to JdCloud-EIP">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-name-14">Plugin name<a href="#plugin-name-14" class="hash-link" aria-label="Direct link to Plugin name" title="Direct link to Plugin name">‚Äã</a></h4>
<p><code>JdCloud-EIP</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-provider-13">Cloud Provider<a href="#cloud-provider-13" class="hash-link" aria-label="Direct link to Cloud Provider" title="Direct link to Cloud Provider">‚Äã</a></h4>
<p>JDCloud</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-description-14">Plugin description<a href="#plugin-description-14" class="hash-link" aria-label="Direct link to Plugin description" title="Direct link to Plugin description">‚Äã</a></h4>
<p>JdCloud Container Service supports binding an Elastic Public IP directly to a pod in Kubernetes, allowing the pod to communicate directly with the external network.</p>
<ul>
<li>The cluster&#x27;s network plugin uses Yunjian-CNI and cannot use Flannel to create the cluster.</li>
<li>For specific usage restrictions of Elastic Public IPs, please refer to the JdCloud Elastic Public IP product documentation.</li>
<li>Install the EIP-Controller component.</li>
<li>The Elastic Public IP will not be deleted when the pod is destroyed.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-parameters-14">Network parameters<a href="#network-parameters-14" class="hash-link" aria-label="Direct link to Network parameters" title="Direct link to Network parameters">‚Äã</a></h4>
<p>BandwidthConfigName</p>
<ul>
<li>MeaningÔºöThe bandwidth of the Elastic Public IP, measured in Mbps, has a value range of [1, 1024].</li>
<li>ValueÔºöMust be an integer</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>ChargeTypeConfigName</p>
<ul>
<li>MeaningÔºöThe billing method for the Elastic Public IP</li>
<li>ValueÔºöstring, <code>postpaid_by_usage</code>/<code>postpaid_by_duration</code></li>
<li>ConfigurableÔºöY</li>
</ul>
<p>FixedEIPConfigName</p>
<ul>
<li>MeaningÔºöWhether to fixed the Elastic Public IP,if so, the EIP will not be changed when the pod is recreated.</li>
<li>ValueÔºöstring, &quot;false&quot; / &quot;true&quot;</li>
<li>ConfigurableÔºöY</li>
</ul>
<p>AssignEIPConfigName</p>
<ul>
<li>MeaningÔºöWhether to designate a specific Elastic Public IP. If true, provide the ID of the Elastic Public IP; otherwise, an EIP will be automatically allocated.</li>
<li>ValueÔºöstring, &quot;false&quot; / &quot;true&quot;</li>
</ul>
<p>EIPIdConfigName</p>
<ul>
<li>MeaningÔºöIf a specific Elastic Public IP is designated, the ID of the Elastic Public IP must be provided, and the component will automatically perform the lookup and binding.</li>
<li>ValueÔºöstringÔºåfor exampleÔºö<code>fip-xxxxxxxx</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-12">Example<a href="#example-12" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">‚Äã</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gss</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">north</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">1.jcr.service.jdcloud.com/gsshosting/pal</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JdCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">EIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BandWidth&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ChargeType&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postpaid_by_usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Fixed&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check the network status in GameServer:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">networkStatus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">createTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-11-04T10:53:14Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">currentNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">desiredNetworkState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">externalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> xxx.xxx.xxx.xxx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">internalAddresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10.0.0.95</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-11-04T10:53:14Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JdCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">EIP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-isolation">Network Isolation<a href="#network-isolation" class="hash-link" aria-label="Direct link to Network Isolation" title="Direct link to Network Isolation">‚Äã</a></h2>
<p>Consider the following scenarios, such as:</p>
<ul>
<li>A major anomaly occurs in the game server, and players need to be prevented from connecting</li>
<li>Before the version is updated, the player&#x27;s network connection is cut off</li>
<li>Other temporary service-related needs, and the service will be reopened after the operation and maintenance is processed</li>
</ul>
<p>Compared to the method of directly deleting the game server Pod, network isolation at the access layer is a simpler and lighter operation. It can retain the Pod and GameServer metadata information without reconstruction, which improves the efficiency of reopening the service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">‚Äã</a></h3>
<p>GameServer.Spec has a NetworkDisabled field. The default NetworkDisabled of the GameServer generated by the GameServerSet is false, which means that network isolation will not be set when the game server is deployed at first.</p>
<p>When the game server has a network isolation requirement, you can set GameServer.Spec.NetworkDisabled to true manually (kubectl/K8s API) / custom service quality to start network isolation; when it is set to false, the network will be restored.</p>
<p>It should be noted that the network isolation function is provided by each network plugin, and users need to check whether the corresponding plugin supports the network isolation function when using the network plugin.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="access-to-network-information">Access to network information<a href="#access-to-network-information" class="hash-link" aria-label="Direct link to Access to network information" title="Direct link to Access to network information">‚Äã</a></h2>
<p>GameServer Network Status can be obtained in two ways</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="k8s-api">k8s API<a href="#k8s-api" class="hash-link" aria-label="Direct link to k8s API" title="Direct link to k8s API">‚Äã</a></h3>
<p>Call the K8s API and get the GameServer object. This method is applicable to the central component, usually in the matching service to get the game service network information for routing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="downwardapi">DownwardAPI<a href="#downwardapi" class="hash-link" aria-label="Direct link to DownwardAPI" title="Direct link to DownwardAPI">‚Äã</a></h3>
<p>Downward API to sink network information into the business container for use by the game service business container</p>
<p>An example of this method is as follows.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> game.kruise.io/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> GameServerSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">slb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">updateStrategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">podUpdatePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> InPlaceIfPossible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> AlibabaCloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">SLB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networkConf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SlbIds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PortProtocols</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gameServerTemplate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry.cn</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hangzhou.aliyuncs.com/gs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo/gameserver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> podinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /etc/podinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> podinfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">downwardAPI</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">items</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;network&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token key atrule" style="color:#00a4db">fieldRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token key atrule" style="color:#00a4db">fieldPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata.annotations</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;game.kruise.io/network-status&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>field description:</p>
<ul>
<li>Declare volumeMounts in the corresponding container field, defining the access path, in this case /etc/podinfo</li>
<li>Declare the downwardAPI in gameServerTemplate.spec, set the filename to &quot;network&quot; and specify to use &quot;game.kruise.io/network-status &quot;Note that the annotation key should be in single quotes &#x27;&#x27;, double quotes pod will fail to be created.</li>
</ul>
<p>After the successful creation of business pods and containers, a network file exists under the corresponding /etc/podinfo path, which records the serialized network information, which can be decoded into the corresponding structure by json and used in the program to obtain the corresponding fields. The decoded sample is as follows (golang version)</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;encoding/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token string" style="color:#e3116c">&quot;github.com/openkruise/kruise-game/apis/v1alpha1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;os&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getNetwork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	network</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ReadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/etc/podinfo/network&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	networkStatus </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">v1alpha1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">NetworkStatus</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	err </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unmarshal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">network</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> networkStatus</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// accessing the networkStatus fields</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When getting network information, you may face the situation that the network status is not ready, you can add a loop in the programme to continuously detect the network status until the network status is Ready and then get the network information data. The following is the corresponding shell script.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Initialise JSON string to empty</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Loop until you get the data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-z</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$json</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Reading a JSON string from a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">cat</span><span class="token variable" style="color:#36acaa"> /etc/podinfo/network</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Check if currentNetworkState is Ready</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">currentNetworkState</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> $json </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> jq </span><span class="token variable parameter variable" style="color:#36acaa">-r</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;.currentNetworkState&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$currentNetworkState</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Ready&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;currentNetworkState is not Ready, sleeping 1 second...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token assign-left variable" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Parsing the ip and port of externalAddresses</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;externalAddresses:&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">ip</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> $json </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> jq </span><span class="token variable parameter variable" style="color:#36acaa">-r</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;.externalAddresses[0].ip&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">port</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> $json </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> jq </span><span class="token variable parameter variable" style="color:#36acaa">-r</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;.externalAddresses[0].ports[0].port&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; IP: </span><span class="token string variable" style="color:#36acaa">$ip</span><span class="token string" style="color:#e3116c">, Port: </span><span class="token string variable" style="color:#36acaa">$port</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">‚Äã</a></h2>
<p>Q: How to change the network plugin configuration?</p>
<p>A: The default parameters can be changed by editing the configmap under the kruise-game-system namespace. After the change, rebuild kruise-game-manager to make the configuration take effect. It is recommended that the cluster game service already uses the OKG network plug-in does not easily change the corresponding configuration, and should do a reasonable network planning in advance.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-03-24T01:50:51.000Z" itemprop="dateModified">Mar 24, 2025</time></b> by <b>Zhen Zhang</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kruisegame/user-manuals/service-qualities"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Service Qualities</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kruisegame/user-manuals/lifecycle"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Custom Lifecycle Management</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#feature-overview" class="table-of-contents__link toc-highlight">Feature overview</a></li><li><a href="#network-plugins" class="table-of-contents__link toc-highlight">Network plugins</a><ul><li><a href="#kubernetes-hostport" class="table-of-contents__link toc-highlight">Kubernetes-HostPort</a></li><li><a href="#kubernetes-nodeport" class="table-of-contents__link toc-highlight">Kubernetes-NodePort</a></li><li><a href="#kubernetes-ingress" class="table-of-contents__link toc-highlight">Kubernetes-Ingress</a></li><li><a href="#alibabacloud-natgw" class="table-of-contents__link toc-highlight">AlibabaCloud-NATGW</a></li><li><a href="#alibabacloud-slb" class="table-of-contents__link toc-highlight">AlibabaCloud-SLB</a></li><li><a href="#alibabacloud-nlb" class="table-of-contents__link toc-highlight">AlibabaCloud-NLB</a></li><li><a href="#alibabacloud-eip" class="table-of-contents__link toc-highlight">AlibabaCloud-EIP</a></li><li><a href="#alibabacloud-slb-sharedport" class="table-of-contents__link toc-highlight">AlibabaCloud-SLB-SharedPort</a></li><li><a href="#alibabacloud-nlb-sharedport" class="table-of-contents__link toc-highlight">AlibabaCloud-NLB-SharedPort</a></li><li><a href="#alibabacloud-multi-nlbs" class="table-of-contents__link toc-highlight">AlibabaCloud-Multi-NLBs</a></li><li><a href="#volcengine-clb" class="table-of-contents__link toc-highlight">Volcengine-CLB</a></li><li><a href="#amazonwebservices-nlb" class="table-of-contents__link toc-highlight">AmazonWebServices-NLB</a></li><li><a href="#tencentcloud-clb" class="table-of-contents__link toc-highlight">TencentCloud-CLB</a></li><li><a href="#jdcloud-nlb" class="table-of-contents__link toc-highlight">JdCloud-NLB</a></li><li><a href="#jdcloud-eip" class="table-of-contents__link toc-highlight">JdCloud-EIP</a></li></ul></li><li><a href="#network-isolation" class="table-of-contents__link toc-highlight">Network Isolation</a><ul><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li></ul></li><li><a href="#access-to-network-information" class="table-of-contents__link toc-highlight">Access to network information</a><ul><li><a href="#k8s-api" class="table-of-contents__link toc-highlight">k8s API</a></li><li><a href="#downwardapi" class="table-of-contents__link toc-highlight">DownwardAPI</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kubernetes.slack.com/channels/openkruise" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kubernetes Slack ( #openkruise channel )<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/kruisegame/user-manuals/">DingTalk (GroupID: 23330762 )</a></li><li class="footer__item"><a class="footer__link-item" href="/kruisegame/user-manuals/">WeChat (User: openkruise )</a></li><li class="footer__item"><a href="https://shimo.im/docs/gXqmeQOYBehZ4vqo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bi-week Meeting (APAC, Chinese)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openkruise/kruise" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/openkruise/community/blob/master/community-membership.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Membership<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>¬© 2025 The OpenKruise Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</strong></div></div></div></footer></div>
</body>
</html>